<!-- DO NOT EDIT THIS FILE.

This file is periodically generated from the content in the `/src/`
directory, so all fixes need to be made in `/src/`.
-->
## 關於作者

Carol Nichols 是 Rust Crates.io Team 成員，也是 Rust Core Team 的前成員。她是 Integer 32, LLC 的共同創辦人，這是世界上第一家專注於 Rust 的軟體諮詢公司。Nichols 也曾組織 Rust Belt Rust Conference。

Steve Klabnik 曾是 Rust documentation team 的負責人，也是 Rust 的核心開發者之一。他是位演講常客，也是多產的 open source 貢獻者，他曾參與 Ruby 和 Ruby on Rails 等專案。

## 關於技術審閱者

JT 是 Rust core team 成員，也是 Rust error message format、Rust Language Server (RLS) 和 Nushell 的共同創作者。他們於 2011 年首次開始使用 Rust，並於 2016 年加入 Mozilla 全職投入 Rust 的工作，協助塑造其廣泛使用的方向。近來，他們是位自由 Rust 培訓師，並提倡安全的 systems programming。

## 簡要目錄

## 詳細目錄

## 前言

雖然過去並不明顯，但 Rust programming language 本質上是關於 *賦能*：無論你現在撰寫哪種程式碼，Rust 都能讓你觸及更遠，在比以往更廣泛的 domains 中自信地編程。

舉例來說，處理 memory management、data representation 和 concurrency 等低階細節的「systems-level」工作。傳統上，這個 programming 領域被視為深奧難懂，只有少數投入多年學習以避免其惡名昭彰 pitfalls 的人才能接觸。即使是那些從事這項工作的人，也小心翼翼，唯恐他們的程式碼容易遭受 exploits、crashes 或 corruption。

Rust 打破了這些 barriers，它消除了舊有的 pitfalls，並提供一套友善、精良的 tools 來協助你。需要「深入」進行 low-level control 的程式設計師可以使用 Rust，而無需承擔通常伴隨的 crashes 或 security holes 風險，也無需學習善變的 toolchain 的精微之處。更好的是，該 language 旨在自然地引導你編寫出在 speed 和 memory usage 方面都高效且可靠的程式碼。

已經從事 low-level 程式碼的程式設計師可以使用 Rust 來提升他們的 ambitions。例如，在 Rust 中引入 parallelism 是一種相對低風險的操作：compiler 會為你捕捉 classical mistakes。你也可以更有自信地處理程式碼中更 aggressive 的 optimizations，而不用擔心會 accidentally 引入 crashes 或 vulnerabilities。

但 Rust 不僅限於 low-level systems programming。它足夠 expressive 且 ergonomic，可以讓 CLI apps、web servers 和許多其他 kinds of code 撰寫起來非常 pleasant——你會在本書後面找到 simple examples。使用 Rust 工作可以讓你培養出從一個 domain 轉移到另一個 domain 的 skills；你可以透過撰寫 web app 來學習 Rust，然後將相同的 skills 應用到你的 Raspberry Pi。

本書充分 embraces Rust 賦予其使用者能力的 potential。這是一本 friendly 且 approachable 的 text，旨在幫助你 level up 不僅僅是 Rust 的 knowledge，還有你作為程式設計師的整體 reach 和 confidence。那麼，dive in，準備學習吧——歡迎來到 Rust community！

Nicholas Matsakis 和 Aaron Turon

## 致謝

我們要感謝所有為 Rust language 工作的人，創造了一個 amazing language 值得寫書的。我們感謝 Rust community 中的每個人，他們的 welcoming 創造了一個值得 welcoming 更多人加入的 environment。

我們特別感謝所有在 online 閱讀本書 early versions 並 provided feedback、bug reports 和 pull requests 的人。Special thanks to Eduard-Mihai Burtescu、Alex Crichton 和 JT for providing technical review，以及 Karen Rustad Tölva for the cover art。Thank you to our team at No Starch，including Bill Pollock、Liz Chadwick 和 Janelle Ludowise，for improving this book and bringing it to print。

Carol is grateful for the opportunity to work on this book。She thanks her family for their constant love and support，especially her husband，Jake Goulding，and her daughter，Vivian。

## 前言

本文版本假定你正在使用 Rust 1.62.0（發布於 2022-06-30）或更新版本，並且所有專案的 *Cargo.toml* 檔案中都包含 `edition="2021"`，以將其配置為使用 Rust 2021 edition idioms。有關安裝或更新 Rust 的說明，請參閱 XX 頁的「安裝」章節，有關 editions 的資訊，請參閱 Appendix E。

Rust language 的 2021 edition 包含多項 improvements，這些 improvements 讓 Rust 更符合 ergonomic，並修正了一些 inconsistencies。除了反映這些 improvements 的 general update 外，本書的此 rendition 有多項 improvements，以 address specific feedback：

*   Chapter 7 包含一個關於如何使用 modules 將程式碼組織成 multiple files 的 new quick reference section。
*   Chapter 13 有 new and improved closure examples，更 clearly illustrate captures、`move` keyword 和 `Fn` traits。
*   我們修正了本書中 number of small errors 和 imprecise wording。Thank you to the readers who reported them！

Note that any code from earlier renditions of this book that compiled will continue to compile with the relevant edition in the project’s *Cargo.toml*，even as you update the Rust compiler version you’re using。That’s Rust’s backward-compatibility guarantees at work！

## 導論

歡迎閱讀《The Rust Programming Language》，這是一本關於 Rust 的 introductory book。Rust programming language 幫助你撰寫 faster、more reliable software。High-level ergonomics 和 low-level control 在 programming language design 中 often at odds；Rust challenges that conflict。透過 balancing powerful technical capacity 和 a great developer experience，Rust gives you the option to control low-level details (such as memory usage) without all the hassle traditionally associated with such control。

## Rust 的適用對象

Rust 因為 variety of reasons 而 ideal for many people。Let’s look at a few of the most important groups。

### 開發團隊

Rust is proving to be a productive tool for collaborating among large teams of developers with varying levels of systems programming knowledge。Low-level code is prone to various subtle bugs，which in most other languages can only be caught through extensive testing and careful code review by experienced developers。In Rust，the compiler plays a gatekeeper role by refusing to compile code with these elusive bugs，including concurrency bugs。By working alongside the compiler，the team can spend their time focusing on the program’s logic rather than chasing down bugs。

Rust also brings contemporary developer tools to the systems programming world：

*   Cargo，the included dependency manager and build tool，makes adding、compiling，and managing dependencies painless and consistent across the Rust ecosystem。
*   The `rustfmt` formatting tool ensures a consistent coding style across developers。
*   The Rust Language Server powers integrated development environment (IDE) integration for code completion and inline error messages。

By using these and other tools in the Rust ecosystem，developers can be productive while writing systems-level code。

### 學生

Rust is for students and those who are interested in learning about systems concepts。Using Rust，many people have learned about topics like operating systems development。The community is very welcoming and happy to answer students’ questions。Through efforts such as this book，the Rust teams want to make systems concepts more accessible to more people，especially those new to programming。

### 公司

Hundreds of companies，large and small，use Rust in production for a variety of tasks，including command line tools、web services、DevOps tooling、embedded devices、audio and video analysis and transcoding、cryptocurrencies、bioinformatics、search engines、Internet of Things applications、machine learning，and even major parts of the Firefox web browser。

### 開源開發者

Rust is for people who want to build the Rust programming language、community、developer tools，and libraries。We’d love to have you contribute to the Rust language。

### 重視速度和穩定性的人

Rust is for people who crave speed and stability in a language。By speed，we mean both how quickly Rust code can run and the speed at which Rust lets you write programs。The Rust compiler’s checks ensure stability through feature additions and refactoring。This is in contrast to the brittle legacy code in languages without these checks，which developers are often afraid to modify。By striving for zero-cost abstractions，higher-level features that compile to lower-level code as fast as code written manually，Rust endeavors to make safe code be fast code as well。

The Rust language hopes to support many other users as well；those mentioned here are merely some of the biggest stakeholders。Overall，Rust’s greatest ambition is to eliminate the trade-offs that programmers have accepted for decades by providing safety *and* productivity、speed *and* ergonomics。Give Rust a try and see if its choices work for you。

## 本書適用對象

本書 assumes that you’ve written code in another programming language，but doesn’t make any assumptions about which one。We’ve tried to make the material broadly accessible to those from a wide variety of programming backgrounds。We don’t spend a lot of time talking about what programming *is* or how to think about it。If you’re entirely new to programming，you would be better served by reading a book that specifically provides an introduction to programming。

## 如何使用本書

In general，this book assumes that you’re reading it in sequence from front to back。Later chapters build on concepts in earlier chapters，and earlier chapters might not delve into details on a particular topic but will revisit the topic in a later chapter。

You’ll find two kinds of chapters in this book：concept chapters and project chapters。In concept chapters，you’ll learn about an aspect of Rust。In project chapters，we’ll build small programs together，applying what you’ve learned so far。Chapter 2、Chapter 12，and Chapter 20 are project chapters；the rest are concept chapters。

**Chapter 1** explains how to install Rust，how to write a “Hello，world！” program，and how to use Cargo，Rust’s package manager and build tool。**Chapter 2** is a hands-on introduction to writing a program in Rust，having you build up a number-guessing game。Here，we cover concepts at a high level，and later chapters will provide additional detail。If you want to get your hands dirty right away，Chapter 2 is the place for that。**Chapter 3** covers Rust features that are similar to those of other programming languages，and in **Chapter 4** you’ll learn about Rust’s ownership system。If you’re a particularly meticulous learner who prefers to learn every detail before moving on to the next，you might want to skip Chapter 2 and go straight to Chapter 3，returning to Chapter 2 when you’d like to work on a project applying the details you’ve learned。

**Chapter 5** discusses structs and methods，and **Chapter 6** covers enums、`match` expressions，and the `if let` control flow construct。You’ll use structs and enums to make custom types in Rust。

In **Chapter 7**，you’ll learn about Rust’s module system and about privacy rules for organizing your code and its public application programming interface (API)。**Chapter 8** discusses some common collection data structures that the standard library provides，such as vectors、strings，and hash maps。**Chapter 9** explores Rust’s error-handling philosophy and techniques。

**Chapter 10** digs into generics、traits，and lifetimes，which give you the power to define code that applies to multiple types。**Chapter 11** is all about testing，which even with Rust’s safety guarantees is necessary to ensure your program’s logic is correct。In **Chapter 12**，we’ll build our own implementation of a subset of functionality from the `grep` command line tool that searches for text within files。For this，we’ll use many of the concepts we discussed in the previous chapters。

**Chapter 13** explores closures and iterators：features of Rust that come from functional programming languages。In **Chapter 14**，we’ll examine Cargo in more depth and talk about best practices for sharing your libraries with others。**Chapter 15** discusses smart pointers that the standard library provides and the traits that enable their functionality。

In **Chapter 16**，we’ll walk through different models of concurrent programming and talk about how Rust helps you program in multiple threads fearlessly。**Chapter 17** looks at how Rust idioms compare to object-oriented programming principles you might be familiar with。

**Chapter 18** is a reference on patterns and pattern matching，which are powerful ways of expressing ideas throughout Rust programs。**Chapter 19** contains a smorgasbord of advanced topics of interest，including unsafe Rust、macros，and more about lifetimes、traits、types、functions，and closures。

In **Chapter 20**，we’ll complete a project in which we’ll implement a low-level multithreaded web server！

Finally，some appendices contain useful information about the language in a more reference-like format**。Appendix A** covers Rust’s keywords，**Appendix B** covers Rust’s operators and symbols，**Appendix C** covers derivable traits provided by the standard library，**Appendix D** covers some useful development tools，and **Appendix E** explains Rust editions。

There is no wrong way to read this book：if you want to skip ahead，go for it！You might have to jump back to earlier chapters if you experience any confusion。But do whatever works for you。

An important part of the process of learning Rust is learning how to read the error messages the compiler displays：these will guide you toward working code。As such，we’ll provide many examples that don’t compile along with the error message the compiler will show you in each situation。Know that if you enter and run a random example，it may not compile！Make sure you read the surrounding text to see whether the example you’re trying to run is meant to error。In most situations，we’ll lead you to the correct version of any code that doesn’t compile。

## 資源以及如何為本書做出貢獻

本書為 open source。如果你發現 error，please don’t hesitate to file an issue or send a pull request on GitHub at *https://github.com/rust-lang/book*。Please see *https://doc.rust-lang.org/book/CONTRIBUTING.md* at *https://github.com/rust-lang/book/blob/main/CONTRIBUTING.md* for more details。

The source code for the examples in this book、errata，and other information are available at *https://www.nostarch.com/Rust2021*。