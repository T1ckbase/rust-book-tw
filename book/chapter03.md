<!-- DO NOT EDIT THIS FILE.

This file is periodically generated from the content in the `/src/`
directory, so all fixes need to be made in `/src/`.
-->

[TOC]

# å¸¸è¦‹ç¨‹å¼è¨­è¨ˆæ¦‚å¿µ

æœ¬ç« ç¯€ä»‹ç´¹äº†å¹¾ä¹æ‰€æœ‰ç¨‹å¼èªè¨€ä¸­éƒ½æœƒå‡ºç¾çš„æ¦‚å¿µï¼Œä»¥åŠå®ƒå€‘åœ¨ Rust ä¸­æ˜¯å¦‚ä½•é‹ä½œçš„ã€‚è¨±å¤šç¨‹å¼èªè¨€çš„æ ¸å¿ƒéƒ½æœ‰è¨±å¤šå…±é€šä¹‹è™•ã€‚æœ¬ç« ç¯€ä¸­ä»‹ç´¹çš„æ¦‚å¿µéƒ½ä¸æ˜¯ Rust ç¨æœ‰çš„ï¼Œä½†æˆ‘å€‘å°‡åœ¨ Rust çš„èªå¢ƒä¸­è¨è«–å®ƒå€‘ï¼Œä¸¦è§£é‡‹ä½¿ç”¨é€™äº›æ¦‚å¿µçš„æ…£ä¾‹ã€‚

å…·é«”ä¾†èªªï¼Œä½ å°‡å­¸ç¿’è®Šæ•¸ (variables)ã€åŸºæœ¬å‹åˆ¥ (basic types)ã€å‡½æ•¸ (functions)ã€è¨»è§£ (comments) å’Œæ§åˆ¶æµç¨‹ (control flow)ã€‚é€™äº›åŸºç¤å°‡æœƒå‡ºç¾åœ¨æ¯å€‹ Rust ç¨‹å¼ä¸­ï¼Œç›¡æ—©å­¸ç¿’å®ƒå€‘å°‡ç‚ºä½ æ‰“ä¸‹å …å¯¦çš„åŸºç¤ã€‚

> #### é—œéµå­— (Keywords)
>
> èˆ‡å…¶ä»–èªè¨€ä¸€æ¨£ï¼ŒRust èªè¨€æœ‰ä¸€çµ„*é—œéµå­—* (keywords) å°ˆä¾›èªè¨€æœ¬èº«ä½¿ç”¨ã€‚è«‹è¨˜ä½ï¼Œä½ ä¸èƒ½å°‡é€™äº›è©ç”¨ä½œè®Šæ•¸æˆ–å‡½æ•¸çš„åç¨±ã€‚å¤§å¤šæ•¸é—œéµå­—éƒ½æœ‰ç‰¹æ®Šå«ç¾©ï¼Œä½ å°‡åœ¨ Rust ç¨‹å¼ä¸­ä½¿ç”¨å®ƒå€‘ä¾†åŸ·è¡Œå„ç¨®ä»»å‹™ï¼›å°‘æ•¸é—œéµå­—ç›®å‰æ²’æœ‰ç›¸é—œåŠŸèƒ½ï¼Œä½†å·²ä¿ç•™ç”¨æ–¼æœªä¾†å¯èƒ½æ·»åŠ åˆ° Rust ä¸­çš„åŠŸèƒ½ã€‚ä½ å¯ä»¥åœ¨é™„éŒ„ A ä¸­æ‰¾åˆ°é—œéµå­—åˆ—è¡¨ã€‚

## è®Šæ•¸èˆ‡å¯è®Šæ€§ (Variables and Mutability)

å¦‚ã€Œ[ç”¨è®Šæ•¸å„²å­˜æ•¸å€¼](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html#storing-values-with-variables)ã€ç« ç¯€æ‰€è¿°ï¼Œè®Šæ•¸é è¨­æ˜¯ immutableï¼ˆä¸å¯è®Šï¼‰çš„ã€‚é€™æ˜¯ Rust é¼“å‹µä½ ä»¥ä¸€ç¨®æ–¹å¼ç·¨å¯«ç¨‹å¼ç¢¼ï¼Œå¾è€Œåˆ©ç”¨ Rust æ‰€æä¾›çš„å®‰å…¨æ€§å’Œæ˜“æ–¼ä½µç™¼æ€§çš„çœ¾å¤šæç¤ºä¹‹ä¸€ã€‚ç„¶è€Œï¼Œä½ ä»ç„¶å¯ä»¥é¸æ“‡å°‡ä½ çš„è®Šæ•¸è¨­ç‚º mutableï¼ˆå¯è®Šï¼‰ã€‚è®“æˆ‘å€‘æ¢è¨ Rust å¦‚ä½•ä»¥åŠç‚ºä½•é¼“å‹µä½ åå¥½ immutabilityï¼Œä»¥åŠæœ‰æ™‚ä½ ç‚ºä½•å¯èƒ½å¸Œæœ›é¸æ“‡ä¸ä½¿ç”¨å®ƒã€‚

ç•¶ä¸€å€‹è®Šæ•¸æ˜¯ immutable æ™‚ï¼Œä¸€æ—¦ä¸€å€‹å€¼è¢«ç¶å®šåˆ°ä¸€å€‹åç¨±ï¼Œä½ å°±ä¸èƒ½æ”¹è®Šé‚£å€‹å€¼ã€‚ç‚ºäº†èªªæ˜é€™ä¸€é»ï¼Œåœ¨ä½ çš„ *projects* ç›®éŒ„ä¸­ï¼Œä½¿ç”¨ `cargo new variables` ä¾†å»ºç«‹ä¸€å€‹åç‚º *variables* çš„æ–°å°ˆæ¡ˆã€‚

ç„¶å¾Œï¼Œåœ¨ä½ æ–°çš„ *variables* ç›®éŒ„ä¸­ï¼Œæ‰“é–‹ *src/main.rs* ä¸¦å°‡å…¶ç¨‹å¼ç¢¼æ›¿æ›ç‚ºä»¥ä¸‹ç¨‹å¼ç¢¼ï¼Œé€™æ®µç¨‹å¼ç¢¼ç›®å‰é‚„ç„¡æ³•ç·¨è­¯ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let x = 5;
    println!("The value of x is: {x}");
    x = 6;
    println!("The value of x is: {x}");
}
```

å„²å­˜ä¸¦ä½¿ç”¨ `cargo run` åŸ·è¡Œç¨‹å¼ã€‚ä½ æ‡‰è©²æœƒæ”¶åˆ°ä¸€å€‹é—œæ–¼ immutability éŒ¯èª¤çš„è¨Šæ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ cargo run
   Compiling variables v0.1.0 (file:///projects/variables)
error[E0384]: cannot assign twice to immutable variable `x`
 --> src/main.rs:4:5
  |
2 |     let x = 5;
  |         - first assignment to `x`
3 |     println!("The value of x is: {x}");
4 |     x = 6;
  |     ^^^^^ cannot assign twice to immutable variable
  |
help: consider making this binding mutable
  |
2 |     let mut x = 5;
  |         +++

For more information about this error, try `rustc --explain E0384`.
error: could not compile `variables` (bin "variables") due to 1 previous error
```

é€™å€‹ç¯„ä¾‹å±•ç¤ºäº†ç·¨è­¯å™¨å¦‚ä½•å¹«åŠ©ä½ æ‰¾å‡ºç¨‹å¼ä¸­çš„éŒ¯èª¤ã€‚ç·¨è­¯å™¨éŒ¯èª¤å¯èƒ½æœƒä»¤äººæ²®å–ªï¼Œä½†å®ƒå€‘å¯¦éš›ä¸Šåªè¡¨ç¤ºä½ çš„ç¨‹å¼å°šæœªå®‰å…¨åœ°åŸ·è¡Œä½ æƒ³è¦å®ƒåšçš„äº‹æƒ…ï¼›å®ƒå€‘*ä¸*è¡¨ç¤ºä½ ä¸æ˜¯ä¸€å€‹å¥½çš„ç¨‹å¼è¨­è¨ˆå¸«ï¼ç¶“é©—è±å¯Œçš„ Rustaceans ä»ç„¶æœƒé‡åˆ°ç·¨è­¯å™¨éŒ¯èª¤ã€‚

ä½ æ”¶åˆ°éŒ¯èª¤è¨Šæ¯ `` cannot assign twice to immutable variable `x` `` æ˜¯å› ç‚ºä½ å˜—è©¦ç‚º immutable çš„ `x` è®Šæ•¸åˆ†é…ç¬¬äºŒå€‹å€¼ã€‚

ç•¶æˆ‘å€‘å˜—è©¦æ›´æ”¹è¢«æŒ‡å®šç‚º immutable çš„å€¼æ™‚ï¼Œå¾—åˆ°ç·¨è­¯æ™‚éŒ¯èª¤å¾ˆé‡è¦ï¼Œå› ç‚ºé€™ç¨®æƒ…æ³å¾ˆå®¹æ˜“å°è‡´éŒ¯èª¤ã€‚å¦‚æœæˆ‘å€‘ç¨‹å¼ç¢¼çš„ä¸€éƒ¨åˆ†åŸºæ–¼ä¸€å€‹å€¼æ°¸ä¸æ”¹è®Šçš„å‡è¨­é€²è¡Œæ“ä½œï¼Œè€Œç¨‹å¼ç¢¼çš„å¦ä¸€éƒ¨åˆ†å»æ”¹è®Šäº†è©²å€¼ï¼Œé‚£éº¼ç¨‹å¼ç¢¼çš„ç¬¬ä¸€éƒ¨åˆ†å¯èƒ½å°±ç„¡æ³•åŸ·è¡Œå…¶è¨­è¨ˆç›®çš„ã€‚é€™é¡éŒ¯èª¤çš„åŸå› äº‹å¾Œå¾ˆé›£è¿½è¹¤ï¼Œç‰¹åˆ¥æ˜¯ç•¶ç¬¬äºŒéƒ¨åˆ†ç¨‹å¼ç¢¼åª*æœ‰æ™‚*æ›´æ”¹å€¼æ™‚ã€‚Rust ç·¨è­¯å™¨ä¿è­‰ï¼Œç•¶ä½ è²æ˜ä¸€å€‹å€¼ä¸æœƒæ”¹è®Šæ™‚ï¼Œå®ƒç¢ºå¯¦ä¸æœƒæ”¹è®Šï¼Œå› æ­¤ä½ ç„¡éœ€è‡ªå·±è¿½è¹¤ã€‚ä½ çš„ç¨‹å¼ç¢¼å› æ­¤æ›´å®¹æ˜“æ¨è«–ã€‚

ä½† mutability éå¸¸æœ‰ç”¨ï¼Œä¸¦ä¸”å¯ä»¥è®“ç¨‹å¼ç¢¼æ›´æ–¹ä¾¿ç·¨å¯«ã€‚å„˜ç®¡è®Šæ•¸é è¨­æ˜¯ immutable çš„ï¼Œä½†ä½ å¯ä»¥é€éåœ¨è®Šæ•¸åç¨±å‰åŠ ä¸Š `mut` ä¾†ä½¿å…¶æˆç‚º mutableï¼Œå°±åƒä½ åœ¨[ç¬¬äºŒç« ](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html)ä¸­æ‰€åšçš„é‚£æ¨£ã€‚åŠ ä¸Š `mut` ä¹Ÿå‘æœªä¾†çš„ç¨‹å¼ç¢¼è®€è€…å‚³é”æ„åœ–ï¼Œè¡¨æ˜ç¨‹å¼ç¢¼çš„å…¶ä»–éƒ¨åˆ†å°‡æœƒæ”¹è®Šé€™å€‹è®Šæ•¸çš„å€¼ã€‚

ä¾‹å¦‚ï¼Œè®“æˆ‘å€‘å°‡ *src/main.rs* æ›´æ”¹ç‚ºä»¥ä¸‹å…§å®¹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let mut x = 5;
    println!("The value of x is: {x}");
    x = 6;
    println!("The value of x is: {x}");
}
```

ç¾åœ¨åŸ·è¡Œç¨‹å¼ï¼Œæˆ‘å€‘æœƒå¾—åˆ°ä»¥ä¸‹è¼¸å‡ºï¼š

```
$ cargo run
   Compiling variables v0.1.0 (file:///projects/variables)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.30s
     Running `target/debug/variables`
The value of x is: 5
The value of x is: 6
```

ç•¶ä½¿ç”¨ `mut` æ™‚ï¼Œæˆ‘å€‘è¢«å…è¨±å°‡ç¶å®šåˆ° `x` çš„å€¼å¾ `5` æ›´æ”¹ç‚º `6`ã€‚æœ€çµ‚ï¼Œæ±ºå®šæ˜¯å¦ä½¿ç”¨ mutability å–æ±ºæ–¼ä½ ï¼Œä¸¦å–æ±ºæ–¼ä½ èªç‚ºåœ¨å“ªç¨®ç‰¹å®šæƒ…æ³ä¸‹æœ€æ¸…æ¥šã€‚

### å¸¸æ•¸ (Constants)

èˆ‡ immutable è®Šæ•¸ä¸€æ¨£ï¼Œ*å¸¸æ•¸* (constants) æ˜¯ç¶å®šåˆ°åç¨±ä¸”ä¸å…è¨±æ›´æ”¹çš„å€¼ï¼Œä½†å¸¸æ•¸å’Œè®Šæ•¸ä¹‹é–“å­˜åœ¨ä¸€äº›å·®ç•°ã€‚

é¦–å…ˆï¼Œä½ ä¸å…è¨±å°‡ `mut` èˆ‡å¸¸æ•¸ä¸€èµ·ä½¿ç”¨ã€‚å¸¸æ•¸ä¸åƒ…é è¨­æ˜¯ immutable çš„â€”â€”å®ƒå€‘ç¸½æ˜¯ immutable çš„ã€‚ä½ ä½¿ç”¨ `const` é—œéµå­—è€Œä¸æ˜¯ `let` é—œéµå­—ä¾†å®£å‘Šå¸¸æ•¸ï¼Œä¸¦ä¸”å€¼çš„å‹åˆ¥*å¿…é ˆ*è¢«è¨»é‡‹ã€‚æˆ‘å€‘å°‡åœ¨ä¸‹ä¸€ç¯€ã€Œ[è³‡æ–™å‹åˆ¥](https://doc.rust-lang.org/book/ch03-02-data-types.html)ã€ä¸­ä»‹ç´¹å‹åˆ¥å’Œå‹åˆ¥è¨»é‡‹ï¼Œæ‰€ä»¥ç¾åœ¨ä¸ç”¨æ“”å¿ƒç´°ç¯€ã€‚ä½ åªéœ€è¦çŸ¥é“ä½ å¿…é ˆå§‹çµ‚è¨»é‡‹å‹åˆ¥ã€‚

å¸¸æ•¸å¯ä»¥åœ¨ä»»ä½•ç¯„åœå…§å®£å‘Šï¼ŒåŒ…æ‹¬å…¨åŸŸç¯„åœï¼Œé€™ä½¿å¾—å®ƒå€‘å°æ–¼ç¨‹å¼ç¢¼è¨±å¤šéƒ¨åˆ†éƒ½éœ€è¦çŸ¥é“çš„å€¼éå¸¸æœ‰ç”¨ã€‚

æœ€å¾Œä¸€å€‹å·®ç•°æ˜¯ï¼Œå¸¸æ•¸åªèƒ½è¨­å®šç‚ºå¸¸æ•¸è¡¨é”å¼ (constant expression)ï¼Œè€Œä¸æ˜¯åªèƒ½åœ¨åŸ·è¡Œæ™‚è¨ˆç®—çš„å€¼çš„çµæœã€‚

é€™æ˜¯ä¸€å€‹å¸¸æ•¸å®£å‘Šçš„ç¯„ä¾‹ï¼š

```
const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
```

é€™å€‹å¸¸æ•¸çš„åç¨±æ˜¯ `THREE_HOURS_IN_SECONDS`ï¼Œå®ƒçš„å€¼è¢«è¨­å®šç‚º 60ï¼ˆä¸€åˆ†é˜çš„ç§’æ•¸ï¼‰ä¹˜ä»¥ 60ï¼ˆä¸€å°æ™‚çš„åˆ†é˜æ•¸ï¼‰å†ä¹˜ä»¥ 3ï¼ˆæˆ‘å€‘æƒ³åœ¨ç¨‹å¼ä¸­è¨ˆç®—çš„å°æ™‚æ•¸ï¼‰çš„çµæœã€‚Rust çš„å¸¸æ•¸å‘½åæ…£ä¾‹æ˜¯ä½¿ç”¨å…¨å¤§å¯«å­—æ¯ä¸¦åœ¨å–®å­—ä¹‹é–“ä½¿ç”¨åº•ç·šã€‚ç·¨è­¯å™¨èƒ½å¤ åœ¨ç·¨è­¯æ™‚è©•ä¼°æœ‰é™çš„é‹ç®—ï¼Œé€™è®“æˆ‘å€‘å¯ä»¥é¸æ“‡ä»¥ä¸€ç¨®æ›´å®¹æ˜“ç†è§£å’Œé©—è­‰çš„æ–¹å¼ä¾†æ’°å¯«é€™å€‹å€¼ï¼Œè€Œä¸æ˜¯å°‡é€™å€‹å¸¸æ•¸è¨­å®šç‚º 10,800ã€‚æœ‰é—œå®£å‘Šå¸¸æ•¸æ™‚å¯ä»¥ä½¿ç”¨å“ªäº›é‹ç®—çš„æ›´å¤šè³‡è¨Šï¼Œè«‹åƒé–± Rust Reference ä¸­é—œæ–¼[å¸¸æ•¸è©•ä¼°](https://doc.rust-lang.org/reference/const_eval.html)çš„éƒ¨åˆ†ã€‚

å¸¸æ•¸åœ¨ç¨‹å¼åŸ·è¡ŒæœŸé–“çš„æ•´å€‹å®£å‘Šç¯„åœå…§éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚é€™å€‹ç‰¹æ€§ä½¿å¾—å¸¸æ•¸å°æ–¼æ‡‰ç”¨ç¨‹å¼é ˜åŸŸä¸­å¤šå€‹ç¨‹å¼éƒ¨åˆ†å¯èƒ½éœ€è¦çŸ¥é“çš„å€¼éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚éŠæˆ²ä¸­ä»»ä½•ç©å®¶å…è¨±ç²å¾—çš„æœ€å¤§åˆ†æ•¸ï¼Œæˆ–æ˜¯å…‰é€Ÿã€‚

å°‡ç¨‹å¼ä¸­ä½¿ç”¨çš„ç¡¬ç·¨ç¢¼å€¼å‘½åç‚ºå¸¸æ•¸ï¼Œå°æ–¼å‘æœªä¾†çš„ç¨‹å¼ç¢¼ç¶­è­·è€…å‚³é”è©²å€¼çš„å«ç¾©éå¸¸æœ‰ç”¨ã€‚å¦‚æœæœªä¾†éœ€è¦æ›´æ–°ç¡¬ç·¨ç¢¼å€¼ï¼Œå®ƒä¹Ÿæœ‰åŠ©æ–¼åœ¨ç¨‹å¼ç¢¼ä¸­åªåœ¨ä¸€å€‹åœ°æ–¹é€²è¡Œæ›´æ”¹ã€‚

### é®è”½ (Shadowing)

æ­£å¦‚ä½ åœ¨[ç¬¬äºŒç« ](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html)çš„çŒœæ•¸å­—éŠæˆ²æ•™å­¸ä¸­çœ‹åˆ°çš„é‚£æ¨£ï¼Œä½ å¯ä»¥å®£å‘Šä¸€å€‹èˆ‡å…ˆå‰è®Šæ•¸åŒåçš„æ–°è®Šæ•¸ã€‚Rustaceans ç¨±ç¬¬ä¸€å€‹è®Šæ•¸è¢«ç¬¬äºŒå€‹è®Šæ•¸*é®è”½* (shadowed)ï¼Œé€™è¡¨ç¤ºç•¶ä½ ä½¿ç”¨è©²è®Šæ•¸çš„åç¨±æ™‚ï¼Œç·¨è­¯å™¨å°‡æœƒçœ‹åˆ°ç¬¬äºŒå€‹è®Šæ•¸ã€‚å¯¦éš›ä¸Šï¼Œç¬¬äºŒå€‹è®Šæ•¸æœƒè¦†è“‹ç¬¬ä¸€å€‹è®Šæ•¸ï¼Œç¨ä½”è©²è®Šæ•¸åç¨±çš„æ‰€æœ‰ä½¿ç”¨ï¼Œç›´åˆ°å®ƒè‡ªå·±è¢«é®è”½æˆ–å…¶ä½œç”¨åŸŸçµæŸã€‚æˆ‘å€‘å¯ä»¥é€éä½¿ç”¨ç›¸åŒçš„è®Šæ•¸åç¨±ä¸¦é‡è¤‡ä½¿ç”¨ `let` é—œéµå­—ä¾†é®è”½è®Šæ•¸ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let x = 5;

    let x = x + 1;

    {
        let x = x * 2;
        println!("The value of x in the inner scope is: {x}");
    }

    println!("The value of x is: {x}");
}
```

é€™å€‹ç¨‹å¼é¦–å…ˆå°‡ `x` ç¶å®šåˆ°å€¼ `5`ã€‚ç„¶å¾Œå®ƒé€éé‡è¤‡ `let x =` å»ºç«‹ä¸€å€‹æ–°çš„è®Šæ•¸ `x`ï¼Œå–åŸå§‹å€¼ä¸¦åŠ ä¸Š `1`ï¼Œä½¿å¾— `x` çš„å€¼è®Šç‚º `6`ã€‚æ¥è‘—ï¼Œåœ¨ç”±å¤§æ‹¬è™Ÿå»ºç«‹çš„å…§éƒ¨ä½œç”¨åŸŸä¸­ï¼Œç¬¬ä¸‰å€‹ `let` é™³è¿°å¼ä¹Ÿé®è”½äº† `x` ä¸¦å»ºç«‹äº†ä¸€å€‹æ–°è®Šæ•¸ï¼Œå°‡å…ˆå‰çš„å€¼ä¹˜ä»¥ `2` ä½¿å¾— `x` çš„å€¼è®Šç‚º `12`ã€‚ç•¶è©²ä½œç”¨åŸŸçµæŸæ™‚ï¼Œå…§éƒ¨é®è”½çµæŸï¼Œ`x` æ¢å¾©ç‚º `6`ã€‚ç•¶æˆ‘å€‘åŸ·è¡Œé€™å€‹ç¨‹å¼æ™‚ï¼Œå®ƒå°‡è¼¸å‡ºä»¥ä¸‹å…§å®¹ï¼š

```
$ cargo run
   Compiling variables v0.1.0 (file:///projects/variables)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/variables`
The value of x in the inner scope is: 12
The value of x is: 6
```

é®è”½ (Shadowing) èˆ‡å°‡è®Šæ•¸æ¨™è¨˜ç‚º `mut` æ˜¯ä¸åŒçš„ï¼Œå› ç‚ºå¦‚æœæˆ‘å€‘åœ¨ä¸ä½¿ç”¨ `let` é—œéµå­—çš„æƒ…æ³ä¸‹æ„å¤–åœ°å˜—è©¦é‡æ–°è³¦å€¼çµ¦é€™å€‹è®Šæ•¸ï¼Œæˆ‘å€‘å°‡æœƒå¾—åˆ°ç·¨è­¯æ™‚éŒ¯èª¤ (compile-time error)ã€‚é€éä½¿ç”¨ `let`ï¼Œæˆ‘å€‘å¯ä»¥åœ¨å°å€¼é€²è¡Œä¸€äº›è½‰æ›å¾Œï¼Œè®“è®Šæ•¸åœ¨è½‰æ›å®Œæˆå¾Œä¿æŒ immutableã€‚

`mut` å’Œ shadowing ä¹‹é–“çš„å…¶ä»–å€åˆ¥æ˜¯ï¼Œå› ç‚ºæˆ‘å€‘åœ¨ä½¿ç”¨ `let` é—œéµå­—æ™‚å¯¦éš›ä¸Šæ˜¯å»ºç«‹äº†ä¸€å€‹æ–°è®Šæ•¸ï¼Œæ‰€ä»¥æˆ‘å€‘å¯ä»¥æ”¹è®Šå€¼çš„å‹åˆ¥ï¼Œä½†é‡è¤‡ä½¿ç”¨ç›¸åŒçš„åç¨±ã€‚ä¾‹å¦‚ï¼Œå‡è¨­æˆ‘å€‘çš„ç¨‹å¼è¦æ±‚ä½¿ç”¨è€…é€éè¼¸å…¥ç©ºæ ¼å­—å…ƒä¾†é¡¯ç¤ºä»–å€‘å¸Œæœ›æ–‡æœ¬ä¹‹é–“æœ‰å¤šå°‘ç©ºæ ¼ï¼Œç„¶å¾Œæˆ‘å€‘å¸Œæœ›å°‡è©²è¼¸å…¥å„²å­˜ç‚ºæ•¸å­—ï¼š

```
    let spaces = "   ";
    let spaces = spaces.len();
```

ç¬¬ä¸€å€‹ `spaces` è®Šæ•¸æ˜¯å­—ä¸²å‹åˆ¥ï¼Œç¬¬äºŒå€‹ `spaces` è®Šæ•¸æ˜¯æ•¸å­—å‹åˆ¥ã€‚å› æ­¤ï¼Œé®è”½è®“æˆ‘å€‘ä¸å¿…æƒ³å‡ºä¸åŒçš„åç¨±ï¼Œä¾‹å¦‚ `spaces_str` å’Œ `spaces_num`ï¼›ç›¸åï¼Œæˆ‘å€‘å¯ä»¥é‡è¤‡ä½¿ç”¨æ›´ç°¡å–®çš„ `spaces` åç¨±ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘å€‘å˜—è©¦åƒé€™è£¡æ‰€ç¤ºé‚£æ¨£ä½¿ç”¨ `mut`ï¼Œæˆ‘å€‘å°‡æœƒå¾—åˆ°ç·¨è­¯æ™‚éŒ¯èª¤ï¼š

```
    let mut spaces = "   ";
    spaces = spaces.len();
```

éŒ¯èª¤è¨Šæ¯æŒ‡å‡ºæˆ‘å€‘ä¸å…è¨±æ”¹è®Šè®Šæ•¸çš„å‹åˆ¥ï¼š

```
$ cargo run
   Compiling variables v0.1.0 (file:///projects/variables)
error[E0308]: mismatched types
 --> src/main.rs:3:14
  |
2 |     let mut spaces = "   ";
  |                      ----- expected due to this value
3 |     spaces = spaces.len();
  |              ^^^^^^^^^^^^ expected `&str`, found `usize`

For more information about this error, try `rustc --explain E0308`.
error: could not compile `variables` (bin "variables") due to 1 previous error
```

ç¾åœ¨æˆ‘å€‘å·²ç¶“æ¢è¨äº†è®Šæ•¸çš„é‹ä½œæ–¹å¼ï¼Œæ¥ä¸‹ä¾†çœ‹çœ‹å®ƒå€‘å¯ä»¥æ“æœ‰çš„æ›´å¤šè³‡æ–™å‹åˆ¥ã€‚

## è³‡æ–™å‹åˆ¥ (Data Types)

Rust ä¸­çš„æ¯å€‹å€¼éƒ½å…·æœ‰ç‰¹å®šçš„*è³‡æ–™å‹åˆ¥* (data type)ï¼Œé€™å‘Šè¨´ Rust æ‰€æŒ‡å®šçš„è³‡æ–™é¡å‹ï¼Œä»¥ä¾¿å®ƒçŸ¥é“å¦‚ä½•è™•ç†è©²è³‡æ–™ã€‚æˆ‘å€‘å°‡ä»‹ç´¹å…©ç¨®è³‡æ–™å‹åˆ¥å­é›†ï¼šç´”é‡ (scalar) å’Œè¤‡åˆ (compound)ã€‚

è«‹è¨˜ä½ï¼ŒRust æ˜¯ä¸€ç¨®*éœæ…‹å‹åˆ¥* (statically typed) çš„èªè¨€ï¼Œé€™æ„å‘³è‘—å®ƒå¿…é ˆåœ¨ç·¨è­¯æ™‚çŸ¥é“æ‰€æœ‰è®Šæ•¸çš„å‹åˆ¥ã€‚ç·¨è­¯å™¨é€šå¸¸å¯ä»¥æ ¹æ“šå€¼åŠå…¶ä½¿ç”¨æ–¹å¼ä¾†æ¨æ–·æˆ‘å€‘æƒ³è¦ä½¿ç”¨çš„å‹åˆ¥ã€‚åœ¨è¨±å¤šå‹åˆ¥éƒ½å¯èƒ½çš„æƒ…æ³ä¸‹ï¼Œä¾‹å¦‚åœ¨[ç¬¬äºŒç« ](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html#comparing-the-guess-to-the-secret-number)ã€Œ[æ¯”è¼ƒçŒœæ¸¬èˆ‡ç§˜å¯†æ•¸å­—](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html#comparing-the-guess-to-the-secret-number)ã€ç« ç¯€ä¸­ï¼Œæˆ‘å€‘å°‡ `String` è½‰æ›ç‚ºæ•¸å­—å‹åˆ¥æ™‚ä½¿ç”¨äº† `parse`ï¼Œæˆ‘å€‘å¿…é ˆæ·»åŠ å‹åˆ¥è¨»é‡‹ (type annotation)ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
let guess: u32 = "42".parse().expect("Not a number!");
```

å¦‚æœæˆ‘å€‘ä¸åŠ ä¸Šå‰é¢ç¨‹å¼ç¢¼ä¸­é¡¯ç¤ºçš„ `: u32` å‹åˆ¥è¨»é‡‹ï¼ŒRust å°‡æœƒé¡¯ç¤ºä»¥ä¸‹éŒ¯èª¤ï¼Œé€™è¡¨ç¤ºç·¨è­¯å™¨éœ€è¦æ›´å¤šè³‡è¨Šæ‰èƒ½çŸ¥é“æˆ‘å€‘æƒ³è¦ä½¿ç”¨å“ªç¨®å‹åˆ¥ï¼š

```
$ cargo build
   Compiling no_type_annotations v0.1.0 (file:///projects/no_type_annotations)
error[E0284]: type annotations needed
 --> src/main.rs:2:9
  |
2 |     let guess = "42".parse().expect("Not a number!");
  |         ^^^^^        ----- type must be known at this point
  |
  = note: cannot satisfy `<_ as FromStr>::Err == _`
help: consider giving `guess` an explicit type
  |
2 |     let guess: /* Type */ = "42".parse().expect("Not a number!");
  |              ++++++++++++

For more information about this error, try `rustc --explain E0284`.
error: could not compile `no_type_annotations` (bin "no_type_annotations") due to 1 previous error
```

ä½ æœƒçœ‹åˆ°å…¶ä»–è³‡æ–™å‹åˆ¥çš„ä¸åŒå‹åˆ¥è¨»é‡‹ã€‚

### ç´”é‡å‹åˆ¥ (Scalar Types)

*ç´”é‡* (scalar) å‹åˆ¥è¡¨ç¤ºå–®ä¸€å€¼ã€‚Rust æœ‰å››ç¨®ä¸»è¦çš„ç´”é‡å‹åˆ¥ï¼šæ•´æ•¸ (integers)ã€æµ®é»æ•¸ (floating-point numbers)ã€å¸ƒæ—å€¼ (Booleans) å’Œå­—å…ƒ (characters)ã€‚ä½ å¯èƒ½å¾å…¶ä»–ç¨‹å¼èªè¨€ä¸­èªå¾—é€™äº›å‹åˆ¥ã€‚è®“æˆ‘å€‘æ·±å…¥æ¢è¨å®ƒå€‘åœ¨ Rust ä¸­çš„é‹ä½œæ–¹å¼ã€‚

#### æ•´æ•¸å‹åˆ¥ (Integer Types)

*æ•´æ•¸* (integer) æ˜¯æ²’æœ‰åˆ†æ•¸éƒ¨åˆ†çš„æ•¸å­—ã€‚æˆ‘å€‘åœ¨ç¬¬äºŒç« ä¸­ä½¿ç”¨äº†ä¸€ç¨®æ•´æ•¸å‹åˆ¥ï¼Œ`u32` å‹åˆ¥ã€‚é€™å€‹å‹åˆ¥å®£å‘Šè¡¨ç¤ºå®ƒæ‰€é—œè¯çš„å€¼æ‡‰è©²æ˜¯ä¸€å€‹ unsigned integerï¼ˆç„¡ç¬¦è™Ÿæ•´æ•¸ï¼‰ï¼ˆsigned integer å‹åˆ¥ä»¥ `i` è€Œé `u` é–‹é ­ï¼‰ï¼Œä¸¦ä½”ç”¨ 32 bits çš„ç©ºé–“ã€‚è¡¨ 3-1 é¡¯ç¤ºäº† Rust ä¸­å…§å»ºçš„æ•´æ•¸å‹åˆ¥ã€‚æˆ‘å€‘å¯ä»¥ä½¿ç”¨é€™äº›è®Šé«”ä¸­çš„ä»»ä½•ä¸€å€‹ä¾†å®£å‘Šæ•´æ•¸å€¼çš„å‹åˆ¥ã€‚

è¡¨ 3-1ï¼šRust ä¸­çš„æ•´æ•¸å‹åˆ¥

|é•·åº¦ (Length)|æœ‰ç¬¦è™Ÿ (Signed)|ç„¡ç¬¦è™Ÿ (Unsigned)|
|------|------|--------|
|8-bit|`i8`|`u8`|
|16-bit|`i16`|`u16`|
|32-bit|`i32`|`u32`|
|64-bit|`i64`|`u64`|
|128-bit|`i128`|`u128`|
|ä¾è³´æ¶æ§‹ (architecture dependent)|`isize`|`usize`|

æ¯å€‹è®Šé«”éƒ½å¯ä»¥æ˜¯æœ‰ç¬¦è™Ÿ (signed) æˆ–ç„¡ç¬¦è™Ÿ (unsigned)ï¼Œä¸¦ä¸”å…·æœ‰æ˜ç¢ºçš„å¤§å°ã€‚*æœ‰ç¬¦è™Ÿ*å’Œ*ç„¡ç¬¦è™Ÿ*æŒ‡çš„æ˜¯æ•¸å­—æ˜¯å¦å¯ä»¥æ˜¯è² æ•¸â€”â€”æ›å¥è©±èªªï¼Œæ•¸å­—æ˜¯å¦éœ€è¦å¸¶æœ‰ç¬¦è™Ÿï¼ˆæœ‰ç¬¦è™Ÿï¼‰æˆ–æ˜¯å¦åªæœƒæ˜¯æ­£æ•¸ï¼Œå› æ­¤å¯ä»¥ä¸å¸¶ç¬¦è™Ÿè¡¨ç¤ºï¼ˆç„¡ç¬¦è™Ÿï¼‰ã€‚é€™å°±åƒåœ¨ç´™ä¸Šå¯«æ•¸å­—ä¸€æ¨£ï¼šç•¶ç¬¦è™Ÿå¾ˆé‡è¦æ™‚ï¼Œæ•¸å­—æœƒå¸¶æœ‰åŠ è™Ÿæˆ–æ¸›è™Ÿï¼›ä½†æ˜¯ï¼Œç•¶å¯ä»¥å®‰å…¨åœ°å‡è¨­æ•¸å­—ç‚ºæ­£æ•¸æ™‚ï¼Œå‰‡ä¸å¸¶ç¬¦è™Ÿé¡¯ç¤ºã€‚æœ‰ç¬¦è™Ÿæ•¸å­—ä½¿ç”¨äºŒè£œæ•¸ (twoâ€™s complement) è¡¨ç¤ºæ³•å„²å­˜ã€‚

æ¯å€‹æœ‰ç¬¦è™Ÿè®Šé«”å¯ä»¥å„²å­˜å¾ âˆ’(2<sup>n âˆ’ 1</sup>) åˆ° 2<sup>n âˆ’ 1</sup> âˆ’ 1ï¼ˆå«ï¼‰çš„æ•¸å­—ï¼Œå…¶ä¸­ *n* æ˜¯è©²è®Šé«”ä½¿ç”¨çš„ä½å…ƒæ•¸ã€‚å› æ­¤ï¼Œä¸€å€‹ `i8` å¯ä»¥å„²å­˜å¾ âˆ’(2<sup>7</sup>) åˆ° 2<sup>7</sup> âˆ’ 1 çš„æ•¸å­—ï¼Œå³ âˆ’128 åˆ° 127ã€‚ç„¡ç¬¦è™Ÿè®Šé«”å¯ä»¥å„²å­˜å¾ 0 åˆ° 2<sup>n</sup> âˆ’ 1 çš„æ•¸å­—ï¼Œå› æ­¤ä¸€å€‹ `u8` å¯ä»¥å„²å­˜å¾ 0 åˆ° 2<sup>8</sup> âˆ’ 1 çš„æ•¸å­—ï¼Œå³ 0 åˆ° 255ã€‚

æ­¤å¤–ï¼Œ`isize` å’Œ `usize` å‹åˆ¥å–æ±ºæ–¼ç¨‹å¼é‹è¡Œæ‰€åœ¨çš„é›»è…¦æ¶æ§‹ï¼šå¦‚æœæ˜¯ 64-bit æ¶æ§‹å‰‡ç‚º 64 bitsï¼Œå¦‚æœæ˜¯ 32-bit æ¶æ§‹å‰‡ç‚º 32 bitsã€‚

ä½ å¯ä»¥ç”¨è¡¨ 3-2 ä¸­æ‰€ç¤ºçš„ä»»ä½•ä¸€ç¨®å½¢å¼å¯«æ•´æ•¸ literalsã€‚è«‹æ³¨æ„ï¼Œå¯ä»¥æœ‰å¤šå€‹æ•¸å­—å‹åˆ¥çš„æ•¸å­— literals å…è¨±ä½¿ç”¨å‹åˆ¥å¾Œç¶´ï¼Œä¾‹å¦‚ `57u8`ï¼Œä¾†æŒ‡å®šå‹åˆ¥ã€‚æ•¸å­— literals ä¹Ÿå¯ä»¥ä½¿ç”¨ `_` ä½œç‚ºè¦–è¦ºåˆ†éš”ç¬¦è™Ÿï¼Œä»¥ä½¿æ•¸å­—æ›´å®¹æ˜“é–±è®€ï¼Œä¾‹å¦‚ `1_000`ï¼Œé€™èˆ‡ä½ æŒ‡å®š `1000` å…·æœ‰ç›¸åŒçš„å€¼ã€‚

è¡¨ 3-2ï¼šRust ä¸­çš„æ•´æ•¸ Literal

|æ•¸å­— Literal (Number literals)|ç¯„ä¾‹ (Example)|
|---------------|-------|
|åé€²åˆ¶ (Decimal)|`98_222`|
|åå…­é€²åˆ¶ (Hex)|`0xff`|
|å…«é€²åˆ¶ (Octal)|`0o77`|
|äºŒé€²åˆ¶ (Binary)|`0b1111_0000`|
|ä½å…ƒçµ„ (`u8` only) (Byte (`u8` only))|`b'A'`|

é‚£éº¼ä½ å¦‚ä½•çŸ¥é“è¦ä½¿ç”¨å“ªç¨®æ•´æ•¸å‹åˆ¥å‘¢ï¼Ÿå¦‚æœä½ ä¸ç¢ºå®šï¼ŒRust çš„é è¨­å€¼é€šå¸¸æ˜¯ä¸€å€‹å¥½çš„é–‹å§‹ï¼šæ•´æ•¸å‹åˆ¥é è¨­ç‚º `i32`ã€‚ä½ ä½¿ç”¨ `isize` æˆ– `usize` çš„ä¸»è¦æƒ…æ³æ˜¯ç•¶ç´¢å¼•æŸç¨®é¡å‹çš„ collection æ™‚ã€‚

> ##### æ•´æ•¸æº¢ä½ (Integer Overflow)
>
> å‡è¨­ä½ æœ‰ä¸€å€‹ `u8` å‹åˆ¥çš„è®Šæ•¸ï¼Œå®ƒå¯ä»¥å®¹ç´ 0 åˆ° 255 ä¹‹é–“çš„å€¼ã€‚å¦‚æœä½ å˜—è©¦å°‡è®Šæ•¸æ›´æ”¹ç‚ºè¶…å‡ºè©²ç¯„åœçš„å€¼ï¼Œä¾‹å¦‚ 256ï¼Œå°‡æœƒç™¼ç”Ÿ*æ•´æ•¸æº¢ä½* (integer overflow)ï¼Œé€™å¯èƒ½å°è‡´å…©ç¨®è¡Œç‚ºä¹‹ä¸€ã€‚ç•¶ä½ åœ¨é™¤éŒ¯æ¨¡å¼ (debug mode) ä¸‹ç·¨è­¯æ™‚ï¼ŒRust åŒ…å«æ•´æ•¸æº¢ä½æª¢æŸ¥ï¼Œå¦‚æœç™¼ç”Ÿé€™ç¨®è¡Œç‚ºï¼Œå°‡å°è‡´ä½ çš„ç¨‹å¼åœ¨åŸ·è¡Œæ™‚*panic*ï¼ˆææ…Œï¼‰ã€‚Rust åœ¨ç¨‹å¼ä»¥éŒ¯èª¤é€€å‡ºæ™‚ä½¿ç”¨è¡“èª*panicking*ï¼›æˆ‘å€‘å°‡åœ¨[ç¬¬ä¹ç« ](https://doc.rust-lang.org/book/ch09-00-error-handling.html)çš„ã€Œ[ä½¿ç”¨ `panic!` è™•ç†ç„¡æ³•å¾©åŸçš„éŒ¯èª¤](https://doc.rust-lang.org/book/ch09-01-unrecoverable-errors-with-panic.html)ã€ä¸€ç¯€ä¸­æ›´æ·±å…¥åœ°è¨è«– panicsã€‚
>
> ç•¶ä½ ä½¿ç”¨ `--release` æ¨™èªŒåœ¨ç™¼å¸ƒæ¨¡å¼ (release mode) ä¸‹ç·¨è­¯æ™‚ï¼ŒRust *ä¸*æœƒåŒ…å«å°è‡´ panics çš„æ•´æ•¸æº¢ä½æª¢æŸ¥ã€‚ç›¸åï¼Œå¦‚æœç™¼ç”Ÿæº¢ä½ï¼ŒRust æœƒåŸ·è¡Œ*äºŒè£œæ•¸ç’°ç¹* (twoâ€™s complement wrapping)ã€‚ç°¡è€Œè¨€ä¹‹ï¼Œå¤§æ–¼å‹åˆ¥æ‰€èƒ½å®¹ç´çš„æœ€å¤§å€¼æœƒã€Œç’°ç¹ã€åˆ°å‹åˆ¥æ‰€èƒ½å®¹ç´çš„æœ€å°å€¼ã€‚å°æ–¼ `u8` çš„æƒ…æ³ï¼Œå€¼ 256 è®Šç‚º 0ï¼Œå€¼ 257 è®Šç‚º 1ï¼Œä¾æ­¤é¡æ¨ã€‚ç¨‹å¼ä¸æœƒ panicï¼Œä½†è®Šæ•¸å°‡æ“æœ‰ä¸€å€‹å€¼ï¼Œé€™å€‹å€¼å¯èƒ½ä¸æ˜¯ä½ é æœŸçš„ã€‚ä¾è³´æ•´æ•¸æº¢ä½çš„ç’°ç¹è¡Œç‚ºè¢«è¦–ç‚ºä¸€å€‹éŒ¯èª¤ã€‚
>
> ç‚ºäº†æ˜ç¢ºè™•ç†æº¢ä½çš„å¯èƒ½æ€§ï¼Œä½ å¯ä»¥ä½¿ç”¨æ¨™æº–å‡½å¼åº«ç‚ºåŸºæœ¬æ•¸å­—å‹åˆ¥æä¾›çš„é€™äº›æ–¹æ³•å®¶æ—ï¼š
>
> *   åœ¨æ‰€æœ‰æ¨¡å¼ä¸‹ä½¿ç”¨ `wrapping_*` æ–¹æ³•é€²è¡Œç’°ç¹ï¼Œä¾‹å¦‚ `wrapping_add`ã€‚
> *   å¦‚æœç™¼ç”Ÿæº¢ä½ï¼Œå‰‡ä½¿ç”¨ `checked_*` æ–¹æ³•å›å‚³ `None` å€¼ã€‚
> *   ä½¿ç”¨ `overflowing_*` æ–¹æ³•å›å‚³å€¼å’Œä¸€å€‹å¸ƒæ—å€¼ï¼ŒæŒ‡ç¤ºæ˜¯å¦ç™¼ç”Ÿæº¢ä½ã€‚
> *   ä½¿ç”¨ `saturating_*` æ–¹æ³•å°‡å€¼é£½å’Œåˆ°è©²å‹åˆ¥çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼ã€‚

#### æµ®é»æ•¸å‹åˆ¥ (Floating-Point Types)

Rust ä¹Ÿæœ‰å…©ç¨®ç”¨æ–¼*æµ®é»æ•¸* (floating-point numbers) çš„åŸå§‹å‹åˆ¥ï¼Œå®ƒå€‘æ˜¯å¸¶æœ‰å°æ•¸é»çš„æ•¸å­—ã€‚Rust çš„æµ®é»æ•¸å‹åˆ¥æ˜¯ `f32` å’Œ `f64`ï¼Œå®ƒå€‘çš„å¤§å°åˆ†åˆ¥ç‚º 32 bits å’Œ 64 bitsã€‚é è¨­å‹åˆ¥æ˜¯ `f64`ï¼Œå› ç‚ºåœ¨ç¾ä»£ CPU ä¸Šï¼Œå®ƒçš„é€Ÿåº¦å¤§ç´„èˆ‡ `f32` ç›¸åŒï¼Œä½†èƒ½å¤ æä¾›æ›´é«˜çš„ç²¾ç¢ºåº¦ã€‚æ‰€æœ‰æµ®é»æ•¸å‹åˆ¥éƒ½æ˜¯æœ‰ç¬¦è™Ÿçš„ã€‚

ä»¥ä¸‹æ˜¯ä¸€å€‹å±•ç¤ºæµ®é»æ•¸é‹ä½œçš„ç¯„ä¾‹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let x = 2.0; // f64

    let y: f32 = 3.0; // f32
}
```

æµ®é»æ•¸æ ¹æ“š IEEE-754 æ¨™æº–è¡¨ç¤ºã€‚

#### æ•¸å€¼é‹ç®— (Numeric Operations)

Rust æ”¯æ´æ‰€æœ‰æ•¸å­—å‹åˆ¥æ‡‰æœ‰çš„åŸºæœ¬æ•¸å­¸é‹ç®—ï¼šåŠ æ³•ã€æ¸›æ³•ã€ä¹˜æ³•ã€é™¤æ³•å’Œé¤˜æ•¸ã€‚æ•´æ•¸é™¤æ³•æœƒå‘é›¶æˆªæ–·åˆ°æœ€æ¥è¿‘çš„æ•´æ•¸ã€‚ä»¥ä¸‹ç¨‹å¼ç¢¼é¡¯ç¤ºäº†å¦‚ä½•åœ¨ `let` é™³è¿°å¼ä¸­ä½¿ç”¨æ¯å€‹æ•¸å€¼é‹ç®—ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    // addition
    let sum = 5 + 10;

    // subtraction
    let difference = 95.5 - 4.3;

    // multiplication
    let product = 4 * 30;

    // division
    let quotient = 56.7 / 32.2;
    let truncated = -5 / 3; // Results in -1

    // remainder
    let remainder = 43 % 5;
}
```

é€™äº›é™³è¿°å¼ä¸­çš„æ¯å€‹è¡¨é”å¼éƒ½ä½¿ç”¨ä¸€å€‹æ•¸å­¸é‹ç®—å­ä¸¦è¨ˆç®—å‡ºä¸€å€‹å–®ä¸€å€¼ï¼Œç„¶å¾Œè©²å€¼è¢«ç¶å®šåˆ°ä¸€å€‹è®Šæ•¸ã€‚é™„éŒ„ B åŒ…å«äº† Rust æä¾›çš„æ‰€æœ‰é‹ç®—å­çš„åˆ—è¡¨ã€‚

#### å¸ƒæ—å‹åˆ¥ (The Boolean Type)

èˆ‡å¤§å¤šæ•¸å…¶ä»–ç¨‹å¼èªè¨€ä¸€æ¨£ï¼ŒRust ä¸­çš„å¸ƒæ— (Boolean) å‹åˆ¥æœ‰å…©å€‹å¯èƒ½çš„å€¼ï¼š`true` å’Œ `false`ã€‚å¸ƒæ—å€¼å¤§å°ç‚ºä¸€å€‹ä½å…ƒçµ„ã€‚Rust ä¸­çš„å¸ƒæ—å‹åˆ¥ä½¿ç”¨ `bool` æŒ‡å®šã€‚ä¾‹å¦‚ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let t = true;

    let f: bool = false; // with explicit type annotation
}
```

ä½¿ç”¨å¸ƒæ—å€¼çš„ä¸»è¦æ–¹å¼æ˜¯é€éæ¢ä»¶å¼ (conditionals)ï¼Œä¾‹å¦‚ `if` è¡¨é”å¼ã€‚æˆ‘å€‘å°‡åœ¨ã€Œ[æ§åˆ¶æµç¨‹](https://doc.rust-lang.org/book/ch03-05-control-flow.html)ã€ä¸€ç¯€ä¸­ä»‹ç´¹ `if` è¡¨é”å¼åœ¨ Rust ä¸­çš„é‹ä½œæ–¹å¼ã€‚

#### å­—å…ƒå‹åˆ¥ (The Character Type)

Rust çš„ `char` å‹åˆ¥æ˜¯è©²èªè¨€æœ€åŸå§‹çš„å­—æ¯å‹åˆ¥ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å®£å‘Š `char` å€¼çš„ç¯„ä¾‹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let c = 'z';
    let z: char = 'â„¤'; // with explicit type annotation
    let heart_eyed_cat = 'ğŸ˜»';
}
```

è«‹æ³¨æ„ï¼Œæˆ‘å€‘ä½¿ç”¨å–®å¼•è™Ÿä¾†æŒ‡å®š `char` literalsï¼Œé€™èˆ‡ä½¿ç”¨é›™å¼•è™Ÿçš„å­—ä¸² literals ç›¸åã€‚Rust çš„ `char` å‹åˆ¥å¤§å°ç‚ºå››å€‹ä½å…ƒçµ„ï¼Œä¸¦ä»£è¡¨ä¸€å€‹ Unicode ç´”é‡å€¼ (Unicode scalar value)ï¼Œé€™è¡¨ç¤ºå®ƒå¯ä»¥è¡¨ç¤ºæ¯” ASCII æ›´å¤šçš„å…§å®¹ã€‚å¸¶é‡éŸ³çš„å­—æ¯ï¼›ä¸­æ–‡ã€æ—¥æ–‡å’ŒéŸ“æ–‡å­—å…ƒï¼›è¡¨æƒ…ç¬¦è™Ÿï¼›ä»¥åŠé›¶å¯¬åº¦ç©ºç™½éƒ½æ˜¯ Rust ä¸­æœ‰æ•ˆçš„ `char` å€¼ã€‚Unicode ç´”é‡å€¼çš„ç¯„åœå¾ `U+0000` åˆ° `U+D7FF` ä»¥åŠ `U+E000` åˆ° `U+10FFFF`ï¼ˆå«ï¼‰ã€‚ç„¶è€Œï¼Œåœ¨ Unicode ä¸­ï¼Œã€Œå­—å…ƒã€ä¸¦ä¸æ˜¯ä¸€å€‹çœŸæ­£çš„æ¦‚å¿µï¼Œæ‰€ä»¥ä½ å°ã€Œå­—å…ƒã€çš„äººé¡ç›´è¦ºå¯èƒ½èˆ‡ Rust ä¸­çš„ `char` ä¸ç¬¦ã€‚æˆ‘å€‘å°‡åœ¨ç¬¬å…«ç« ã€Œ[ä½¿ç”¨å­—ä¸²å„²å­˜ UTF-8 ç·¨ç¢¼æ–‡æœ¬](https://doc.rust-lang.org/book/ch08-02-strings.html#storing-utf-8-encoded-text-with-strings)ã€ä¸­è©³ç´°è¨è«–é€™å€‹ä¸»é¡Œã€‚

### è¤‡åˆå‹åˆ¥ (Compound Types)

*è¤‡åˆå‹åˆ¥* (Compound types) å¯ä»¥å°‡å¤šå€‹å€¼çµ„åˆç‚ºä¸€å€‹å‹åˆ¥ã€‚Rust æœ‰å…©ç¨®åŸå§‹è¤‡åˆå‹åˆ¥ï¼šå…ƒçµ„ (tuples) å’Œé™£åˆ— (arrays)ã€‚

#### å…ƒçµ„å‹åˆ¥ (The Tuple Type)

*å…ƒçµ„* (tuple) æ˜¯ä¸€ç¨®å°‡å¤šå€‹å…·æœ‰å„ç¨®å‹åˆ¥çš„å€¼åˆ†çµ„ç‚ºä¸€å€‹è¤‡åˆå‹åˆ¥çš„é€šç”¨æ–¹å¼ã€‚å…ƒçµ„å…·æœ‰å›ºå®šé•·åº¦ï¼šä¸€æ—¦å®£å‘Šï¼Œå®ƒå€‘çš„å¤§å°å°±ä¸èƒ½å¢åŠ æˆ–æ¸›å°‘ã€‚

æˆ‘å€‘é€éå°‡é€—è™Ÿåˆ†éš”çš„å€¼åˆ—è¡¨å¯«åœ¨æ‹¬è™Ÿå…§ä¾†å»ºç«‹ä¸€å€‹å…ƒçµ„ã€‚å…ƒçµ„ä¸­çš„æ¯å€‹ä½ç½®éƒ½æœ‰ä¸€å€‹å‹åˆ¥ï¼Œä¸¦ä¸”å…ƒçµ„ä¸­ä¸åŒå€¼çš„å‹åˆ¥ä¸å¿…ç›¸åŒã€‚æˆ‘å€‘åœ¨é€™å€‹ç¯„ä¾‹ä¸­æ·»åŠ äº†å¯é¸çš„å‹åˆ¥è¨»é‡‹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
}
```

è®Šæ•¸ `tup` ç¶å®šåˆ°æ•´å€‹ tupleï¼Œå› ç‚º tuple è¢«è¦–ç‚ºä¸€å€‹å–®ä¸€çš„è¤‡åˆå…ƒç´ ã€‚è¦å¾ tuple ä¸­å–å‡ºå–®ç¨çš„å€¼ï¼Œæˆ‘å€‘å¯ä»¥ä½¿ç”¨ pattern matching ä¾†è§£æ§‹ tuple å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let tup = (500, 6.4, 1);

    let (x, y, z) = tup;

    println!("The value of y is: {y}");
}
```

é€™å€‹ç¨‹å¼é¦–å…ˆå»ºç«‹ä¸€å€‹ tuple ä¸¦å°‡å…¶ç¶å®šåˆ°è®Šæ•¸ `tup`ã€‚ç„¶å¾Œå®ƒä½¿ç”¨å¸¶æœ‰ `let` çš„ pattern å°‡ `tup` è½‰æ›ç‚ºä¸‰å€‹ç¨ç«‹çš„è®Šæ•¸ `x`ã€`y` å’Œ `z`ã€‚é€™ç¨±ç‚º*è§£æ§‹* (destructuring)ï¼Œå› ç‚ºå®ƒå°‡å–®ä¸€ tuple åˆ†è§£ç‚ºä¸‰å€‹éƒ¨åˆ†ã€‚æœ€å¾Œï¼Œç¨‹å¼å°å‡º `y` çš„å€¼ï¼Œå³ `6.4`ã€‚

æˆ‘å€‘ä¹Ÿå¯ä»¥é€éä½¿ç”¨å¥é» (`.`) å¾Œè·Ÿæˆ‘å€‘è¦å­˜å–çš„å€¼çš„ç´¢å¼•ä¾†ç›´æ¥å­˜å– tuple å…ƒç´ ã€‚ä¾‹å¦‚ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let x: (i32, f64, u8) = (500, 6.4, 1);

    let five_hundred = x.0;

    let six_point_four = x.1;

    let one = x.2;
}
```

é€™å€‹ç¨‹å¼å»ºç«‹ tuple `x`ï¼Œç„¶å¾Œä½¿ç”¨å„è‡ªçš„ç´¢å¼•å­˜å– tuple çš„æ¯å€‹å…ƒç´ ã€‚èˆ‡å¤§å¤šæ•¸ç¨‹å¼èªè¨€ä¸€æ¨£ï¼Œtuple çš„ç¬¬ä¸€å€‹ç´¢å¼•æ˜¯ 0ã€‚

æ²’æœ‰ä»»ä½•å€¼çš„ tuple æœ‰ä¸€å€‹ç‰¹æ®Šåç¨±ï¼Œ*unit*ï¼ˆå–®å…ƒï¼‰ã€‚é€™å€‹å€¼åŠå…¶å°æ‡‰çš„å‹åˆ¥éƒ½å¯«ä½œ `()`ï¼Œä¸¦è¡¨ç¤ºä¸€å€‹ç©ºå€¼æˆ–ä¸€å€‹ç©ºå›å‚³å‹åˆ¥ã€‚è¡¨é”å¼å¦‚æœæ²’æœ‰å›å‚³ä»»ä½•å…¶ä»–å€¼ï¼Œå‰‡æœƒéš±å¼å›å‚³ unit å€¼ã€‚

#### é™£åˆ—å‹åˆ¥ (The Array Type)

å¦ä¸€ç¨®åŒ…å«å¤šå€‹å€¼é›†åˆçš„æ–¹å¼æ˜¯ä½¿ç”¨*é™£åˆ—* (array)ã€‚èˆ‡å…ƒçµ„ (tuple) ä¸åŒï¼Œé™£åˆ—çš„æ¯å€‹å…ƒç´ éƒ½å¿…é ˆå…·æœ‰ç›¸åŒçš„å‹åˆ¥ã€‚èˆ‡æŸäº›å…¶ä»–èªè¨€ä¸­çš„é™£åˆ—ä¸åŒï¼ŒRust ä¸­çš„é™£åˆ—å…·æœ‰å›ºå®šé•·åº¦ã€‚

æˆ‘å€‘å°‡é™£åˆ—ä¸­çš„å€¼å¯«æˆç”¨é€—è™Ÿåˆ†éš”çš„åˆ—è¡¨ï¼Œä¸¦æ”¾åœ¨æ–¹æ‹¬è™Ÿå…§ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];
}
```

ç•¶ä½ å¸Œæœ›è³‡æ–™åœ¨ stack ä¸Šåˆ†é…ï¼Œå°±åƒæˆ‘å€‘ç›®å‰çœ‹åˆ°çš„å…¶ä»–å‹åˆ¥ä¸€æ¨£ï¼Œè€Œä¸æ˜¯åœ¨ heap ä¸Šæ™‚ï¼ˆæˆ‘å€‘å°‡åœ¨[ç¬¬å››ç« ](https://doc.rust-lang.org/book/ch04-00-understanding-ownership.html)ä¸­æ›´å¤šåœ°è¨è«– stack å’Œ heapï¼‰ï¼Œæˆ–è€…ç•¶ä½ å¸Œæœ›ç¢ºä¿å§‹çµ‚æ“æœ‰å›ºå®šæ•¸é‡çš„å…ƒç´ æ™‚ï¼Œé™£åˆ—éå¸¸æœ‰ç”¨ã€‚ä¸éï¼Œé™£åˆ—ä¸åƒ vector å‹åˆ¥é‚£æ¨£éˆæ´»ã€‚*vector* æ˜¯æ¨™æº–å‡½å¼åº«æä¾›çš„é¡ä¼¼ collection å‹åˆ¥ï¼Œå®ƒ*å…è¨±*å¤§å°å¢é•·æˆ–ç¸®å°ï¼Œå› ç‚ºå…¶å…§å®¹ä½æ–¼ heap ä¸Šã€‚å¦‚æœä½ ä¸ç¢ºå®šæ‡‰è©²ä½¿ç”¨é™£åˆ—é‚„æ˜¯ vectorï¼Œå¾ˆæœ‰å¯èƒ½ä½ æ‡‰è©²ä½¿ç”¨ vectorã€‚ç¬¬å…«ç« æœƒæ›´è©³ç´°åœ°è¨è«– vectorsã€‚

ç„¶è€Œï¼Œç•¶ä½ çŸ¥é“å…ƒç´ æ•¸é‡ä¸éœ€è¦æ”¹è®Šæ™‚ï¼Œé™£åˆ—æœƒæ›´æœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ç¨‹å¼ä¸­ä½¿ç”¨æœˆä»½åç¨±ï¼Œä½ å¯èƒ½æœƒä½¿ç”¨é™£åˆ—è€Œä¸æ˜¯ vectorï¼Œå› ç‚ºä½ çŸ¥é“å®ƒå°‡å§‹çµ‚åŒ…å« 12 å€‹å…ƒç´ ï¼š

```rust
let months = ["January", "February", "March", "April", "May", "June", "July",
              "August", "September", "October", "November", "December"];
```

ä½ ä½¿ç”¨æ–¹æ‹¬è™Ÿå¯«ä¸€å€‹é™£åˆ—çš„å‹åˆ¥ï¼Œå…¶ä¸­åŒ…å«æ¯å€‹å…ƒç´ çš„å‹åˆ¥ã€ä¸€å€‹åˆ†è™Ÿï¼Œç„¶å¾Œæ˜¯é™£åˆ—ä¸­å…ƒç´ çš„æ•¸é‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
let a: [i32; 5] = [1, 2, 3, 4, 5];
```

åœ¨é€™è£¡ï¼Œ`i32` æ˜¯æ¯å€‹å…ƒç´ çš„å‹åˆ¥ã€‚åˆ†è™Ÿå¾Œé¢çš„æ•¸å­— `5` è¡¨ç¤ºè©²é™£åˆ—åŒ…å«äº”å€‹å…ƒç´ ã€‚

ä½ ä¹Ÿå¯ä»¥é€éæŒ‡å®šåˆå§‹å€¼ã€æ¥è‘—ä¸€å€‹åˆ†è™Ÿï¼Œç„¶å¾Œåœ¨æ–¹æ‹¬è™Ÿä¸­æŒ‡å®šé™£åˆ—é•·åº¦ä¾†åˆå§‹åŒ–é™£åˆ—ï¼Œä½¿æ¯å€‹å…ƒç´ éƒ½åŒ…å«ç›¸åŒçš„å€¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
let a = [3; 5];
```

åç‚º `a` çš„é™£åˆ—æœ€åˆå°‡åŒ…å« 5 å€‹å…ƒç´ ï¼Œæ‰€æœ‰é€™äº›å…ƒç´ éƒ½å°‡è¢«è¨­å®šç‚ºå€¼ `3`ã€‚é€™èˆ‡å¯« `let a = [3, 3, 3, 3, 3];` ç›¸åŒï¼Œä½†æ–¹å¼æ›´ç‚ºç°¡æ½”ã€‚

##### å­˜å–é™£åˆ—å…ƒç´  (Accessing Array Elements)

é™£åˆ—æ˜¯ä¸€å€‹å·²çŸ¥ã€å›ºå®šå¤§å°çš„å–®ä¸€è¨˜æ†¶é«”å€å¡Šï¼Œå¯ä»¥åœ¨ stack ä¸Šåˆ†é…ã€‚ä½ å¯ä»¥ä½¿ç”¨ç´¢å¼•ä¾†å­˜å–é™£åˆ—ä¸­çš„å…ƒç´ ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];

    let first = a[0];
    let second = a[1];
}
```

åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œåç‚º `first` çš„è®Šæ•¸å°‡ç²å¾—å€¼ `1`ï¼Œå› ç‚ºé€™æ˜¯é™£åˆ—ä¸­ç´¢å¼• `[0]` è™•çš„å€¼ã€‚åç‚º `second` çš„è®Šæ•¸å°‡å¾é™£åˆ—ä¸­ç´¢å¼• `[1]` è™•ç²å¾—å€¼ `2`ã€‚

##### ç„¡æ•ˆçš„é™£åˆ—å…ƒç´ å­˜å– (Invalid Array Element Access)

è®“æˆ‘å€‘çœ‹çœ‹å¦‚æœä½ å˜—è©¦å­˜å–é™£åˆ—æœ«ç«¯ä¹‹å¤–çš„å…ƒç´ æœƒç™¼ç”Ÿä»€éº¼äº‹ã€‚å‡è¨­ä½ åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼ï¼Œé¡ä¼¼æ–¼[ç¬¬äºŒç« ](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html)ä¸­çš„çŒœæ•¸å­—éŠæˆ²ï¼Œå¾ä½¿ç”¨è€…é‚£è£¡ç²å–é™£åˆ—ç´¢å¼•ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
use std::io;

fn main() {
    let a = [1, 2, 3, 4, 5];

    println!("Please enter an array index.");

    let mut index = String::new();

    io::stdin()
        .read_line(&mut index)
        .expect("Failed to read line");

    let index: usize = index
        .trim()
        .parse()
        .expect("Index entered was not a number");

    let element = a[index];

    println!("The value of the element at index {index} is: {element}");
}
```

é€™æ®µç¨‹å¼ç¢¼ç·¨è­¯æˆåŠŸã€‚å¦‚æœä½ ä½¿ç”¨ `cargo run` åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼ä¸¦è¼¸å…¥ `0`ã€`1`ã€`2`ã€`3` æˆ– `4`ï¼Œç¨‹å¼å°‡å°å‡ºé™£åˆ—ä¸­è©²ç´¢å¼•è™•çš„ç›¸æ‡‰å€¼ã€‚å¦‚æœä½ è¼¸å…¥ä¸€å€‹è¶…å‡ºé™£åˆ—æœ«ç«¯çš„æ•¸å­—ï¼Œä¾‹å¦‚ `10`ï¼Œä½ å°‡æœƒçœ‹åˆ°é¡ä¼¼é€™æ¨£çš„è¼¸å‡ºï¼š

```
thread 'main' panicked at src/main.rs:19:19:
index out of bounds: the len is 5 but the index is 10
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
```

ç¨‹å¼åœ¨ç´¢å¼•æ“ä½œä¸­ä½¿ç”¨ç„¡æ•ˆå€¼æ™‚ç”¢ç”Ÿäº†*åŸ·è¡Œæ™‚* (runtime) éŒ¯èª¤ã€‚ç¨‹å¼ä»¥éŒ¯èª¤è¨Šæ¯é€€å‡ºï¼Œä¸¦ä¸”æ²’æœ‰åŸ·è¡Œæœ€çµ‚çš„ `println!` é™³è¿°å¼ã€‚ç•¶ä½ å˜—è©¦ä½¿ç”¨ç´¢å¼•å­˜å–å…ƒç´ æ™‚ï¼ŒRust å°‡æª¢æŸ¥ä½ æŒ‡å®šçš„ç´¢å¼•æ˜¯å¦å°æ–¼é™£åˆ—é•·åº¦ã€‚å¦‚æœç´¢å¼•å¤§æ–¼æˆ–ç­‰æ–¼é•·åº¦ï¼ŒRust å°‡æœƒ panicã€‚æ­¤æª¢æŸ¥å¿…é ˆåœ¨åŸ·è¡Œæ™‚é€²è¡Œï¼Œå°¤å…¶æ˜¯åœ¨æ­¤æƒ…æ³ä¸‹ï¼Œå› ç‚ºç·¨è­¯å™¨ç„¡æ³•çŸ¥é“ä½¿ç”¨è€…åœ¨ç¨å¾ŒåŸ·è¡Œç¨‹å¼ç¢¼æ™‚å°‡è¼¸å…¥ä»€éº¼å€¼ã€‚

é€™æ˜¯ Rust è¨˜æ†¶é«”å®‰å…¨åŸå‰‡å¯¦éš›é‹ä½œçš„ä¸€å€‹ç¯„ä¾‹ã€‚åœ¨è¨±å¤šä½éšèªè¨€ä¸­ï¼Œæ­¤é¡æª¢æŸ¥ä¸¦æœªåŸ·è¡Œï¼Œç•¶ä½ æä¾›ä¸æ­£ç¢ºçš„ç´¢å¼•æ™‚ï¼Œå¯èƒ½æœƒå­˜å–ç„¡æ•ˆè¨˜æ†¶é«”ã€‚Rust é€éç«‹å³é€€å‡ºè€Œä¸æ˜¯å…è¨±è¨˜æ†¶é«”å­˜å–ä¸¦ç¹¼çºŒä¾†ä¿è­·ä½ å…å—æ­¤é¡éŒ¯èª¤çš„å½±éŸ¿ã€‚[ç¬¬ä¹ç« ](https://doc.rust-lang.org/book/ch09-00-error-handling.html)è¨è«–äº†æ›´å¤š Rust çš„éŒ¯èª¤è™•ç†ä»¥åŠå¦‚ä½•ç·¨å¯«å¯è®€ã€å®‰å…¨ä¸”ä¸æœƒ panic ä¹Ÿæ²’æœ‰ç„¡æ•ˆè¨˜æ†¶é«”å­˜å–çš„ç¨‹å¼ç¢¼ã€‚

## å‡½æ•¸ (Functions)

å‡½æ•¸åœ¨ Rust ç¨‹å¼ç¢¼ä¸­å¾ˆå¸¸è¦‹ã€‚ä½ å·²ç¶“è¦‹éèªè¨€ä¸­æœ€é‡è¦çš„å‡½æ•¸ä¹‹ä¸€ï¼š`main` å‡½æ•¸ï¼Œå®ƒæ˜¯è¨±å¤šç¨‹å¼çš„é€²å…¥é»ã€‚ä½ ä¹Ÿè¦‹é `fn` é—œéµå­—ï¼Œå®ƒå…è¨±ä½ å®£å‘Šæ–°å‡½æ•¸ã€‚

Rust ç¨‹å¼ç¢¼ä½¿ç”¨ *snake case* ä½œç‚ºå‡½æ•¸å’Œè®Šæ•¸åç¨±çš„æ…£ä¾‹é¢¨æ ¼ï¼Œå…¶ä¸­æ‰€æœ‰å­—æ¯éƒ½æ˜¯å°å¯«ï¼Œå–®å­—ä¹‹é–“ç”¨åº•ç·šåˆ†éš”ã€‚é€™æ˜¯ä¸€å€‹åŒ…å«å‡½æ•¸å®šç¾©ç¯„ä¾‹çš„ç¨‹å¼ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    println!("Hello, world!");

    another_function();
}

fn another_function() {
    println!("Another function.");
}
```

æˆ‘å€‘é€éè¼¸å…¥ `fn` å¾Œè·Ÿå‡½æ•¸åç¨±å’Œä¸€çµ„æ‹¬è™Ÿä¾†åœ¨ Rust ä¸­å®šç¾©ä¸€å€‹å‡½æ•¸ã€‚å¤§æ‹¬è™Ÿå‘Šè¨´ç·¨è­¯å™¨å‡½æ•¸ä¸»é«” (function body) çš„é–‹å§‹å’ŒçµæŸä½ç½®ã€‚

æˆ‘å€‘å¯ä»¥é€éè¼¸å…¥å‡½æ•¸åç¨±å¾Œè·Ÿä¸€çµ„æ‹¬è™Ÿä¾†å‘¼å«ä»»ä½•æˆ‘å€‘å®šç¾©çš„å‡½æ•¸ã€‚å› ç‚º `another_function` åœ¨ç¨‹å¼ä¸­å®šç¾©ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ `main` å‡½æ•¸å…§éƒ¨å‘¼å«å®ƒã€‚è«‹æ³¨æ„ï¼Œæˆ‘å€‘åœ¨åŸå§‹ç¢¼ä¸­å°‡ `another_function` å®šç¾©åœ¨ `main` å‡½æ•¸*ä¹‹å¾Œ*ï¼›æˆ‘å€‘ä¹Ÿå¯ä»¥å°‡å®ƒå®šç¾©åœ¨ä¹‹å‰ã€‚Rust ä¸åœ¨ä¹ä½ æŠŠå‡½æ•¸å®šç¾©åœ¨å“ªè£¡ï¼Œåªåœ¨ä¹å®ƒå€‘æ˜¯å¦å®šç¾©åœ¨ä¸€å€‹å‘¼å«è€…å¯ä»¥çœ‹åˆ°çš„ä½œç”¨åŸŸå…§ã€‚

è®“æˆ‘å€‘å»ºç«‹ä¸€å€‹åç‚º *functions* çš„æ–° binary project ä¾†é€²ä¸€æ­¥æ¢ç´¢å‡½æ•¸ã€‚å°‡ `another_function` ç¯„ä¾‹æ”¾åœ¨ *src/main.rs* ä¸­ä¸¦åŸ·è¡Œå®ƒã€‚ä½ æ‡‰è©²æœƒçœ‹åˆ°ä»¥ä¸‹è¼¸å‡ºï¼š

```
$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.28s
     Running `target/debug/functions`
Hello, world!
Another function.
```

ç¨‹å¼ç¢¼è¡ŒæŒ‰ç…§å®ƒå€‘åœ¨ `main` å‡½æ•¸ä¸­å‡ºç¾çš„é †åºåŸ·è¡Œã€‚é¦–å…ˆå°å‡ºã€ŒHello, world!ã€è¨Šæ¯ï¼Œç„¶å¾Œå‘¼å« `another_function` ä¸¦å°å‡ºå…¶è¨Šæ¯ã€‚

### åƒæ•¸ (Parameters)

æˆ‘å€‘å¯ä»¥å®šç¾©å‡½æ•¸å…·æœ‰*åƒæ•¸* (parameters)ï¼Œé€™äº›åƒæ•¸æ˜¯å‡½æ•¸ç°½ç«  (functionâ€™s signature) çš„ä¸€éƒ¨åˆ†çš„ç‰¹æ®Šè®Šæ•¸ã€‚ç•¶ä¸€å€‹å‡½æ•¸æœ‰åƒæ•¸æ™‚ï¼Œä½ å¯ä»¥ç‚ºé€™äº›åƒæ•¸æä¾›å…·é«”çš„å€¼ã€‚åš´æ ¼ä¾†èªªï¼Œé€™äº›å…·é«”çš„å€¼ç¨±ç‚º*å¼•æ•¸* (arguments)ï¼Œä½†åœ¨æ—¥å¸¸å°è©±ä¸­ï¼Œäººå€‘å‚¾å‘æ–¼å°‡*åƒæ•¸*å’Œ*å¼•æ•¸*äº¤æ›¿ä½¿ç”¨ï¼Œç„¡è«–æ˜¯å‡½æ•¸å®šç¾©ä¸­çš„è®Šæ•¸é‚„æ˜¯å‘¼å«å‡½æ•¸æ™‚å‚³å…¥çš„å…·é«”å€¼ã€‚

åœ¨é€™å€‹ç‰ˆæœ¬çš„ `another_function` ä¸­ï¼Œæˆ‘å€‘æ–°å¢äº†ä¸€å€‹åƒæ•¸ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    another_function(5);
}

fn another_function(x: i32) {
    println!("The value of x is: {x}");
}
```

å˜—è©¦åŸ·è¡Œé€™å€‹ç¨‹å¼ï¼›ä½ æ‡‰è©²æœƒå¾—åˆ°ä»¥ä¸‹è¼¸å‡ºï¼š

```
$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 1.21s
     Running `target/debug/functions`
The value of x is: 5
```

`another_function` çš„å®£å‘Šæœ‰ä¸€å€‹åç‚º `x` çš„åƒæ•¸ã€‚`x` çš„å‹åˆ¥è¢«æŒ‡å®šç‚º `i32`ã€‚ç•¶æˆ‘å€‘å°‡ `5` å‚³éçµ¦ `another_function` æ™‚ï¼Œ`println!` macro å°‡ `5` æ”¾åœ¨æ ¼å¼å­—ä¸²ä¸­åŒ…å« `x` çš„å¤§æ‹¬è™Ÿå°çš„ä½ç½®ã€‚

åœ¨å‡½æ•¸ç°½ç« ä¸­ï¼Œä½ *å¿…é ˆ*å®£å‘Šæ¯å€‹åƒæ•¸çš„å‹åˆ¥ã€‚é€™æ˜¯ Rust è¨­è¨ˆä¸­çš„ä¸€å€‹åˆ»æ„æ±ºå®šï¼šè¦æ±‚åœ¨å‡½æ•¸å®šç¾©ä¸­é€²è¡Œå‹åˆ¥è¨»é‡‹æ„å‘³è‘—ç·¨è­¯å™¨å¹¾ä¹å¾ä¸éœ€è¦ä½ åœ¨ç¨‹å¼ç¢¼çš„å…¶ä»–åœ°æ–¹ä½¿ç”¨å®ƒå€‘ä¾†å¼„æ¸…æ¥šä½ æŒ‡çš„æ˜¯å“ªç¨®å‹åˆ¥ã€‚å¦‚æœç·¨è­¯å™¨çŸ¥é“å‡½æ•¸é æœŸå“ªäº›å‹åˆ¥ï¼Œå®ƒä¹Ÿèƒ½æä¾›æ›´æœ‰ç”¨çš„éŒ¯èª¤è¨Šæ¯ã€‚

ç•¶å®šç¾©å¤šå€‹åƒæ•¸æ™‚ï¼Œè«‹ç”¨é€—è™Ÿåˆ†éš”åƒæ•¸å®£å‘Šï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    print_labeled_measurement(5, 'h');
}

fn print_labeled_measurement(value: i32, unit_label: char) {
    println!("The measurement is: {value}{unit_label}");
}
```

é€™å€‹ç¯„ä¾‹å»ºç«‹äº†ä¸€å€‹åç‚º `print_labeled_measurement` çš„å‡½æ•¸ï¼Œå®ƒæœ‰å…©å€‹åƒæ•¸ã€‚ç¬¬ä¸€å€‹åƒæ•¸åç‚º `value`ï¼Œå‹åˆ¥ç‚º `i32`ã€‚ç¬¬äºŒå€‹åƒæ•¸åç‚º `unit_label`ï¼Œå‹åˆ¥ç‚º `char`ã€‚ç„¶å¾Œå‡½æ•¸æœƒå°å‡ºåŒ…å« `value` å’Œ `unit_label` çš„æ–‡æœ¬ã€‚

è®“æˆ‘å€‘å˜—è©¦åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼ã€‚å°‡ä½  *functions* å°ˆæ¡ˆçš„ *src/main.rs* æª”æ¡ˆä¸­ç›®å‰çš„ç¨‹å¼æ›¿æ›ç‚ºä¸Šè¿°ç¯„ä¾‹ï¼Œä¸¦ä½¿ç”¨ `cargo run` åŸ·è¡Œå®ƒï¼š

```
$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/functions`
The measurement is: 5h
```

å› ç‚ºæˆ‘å€‘ä»¥ `5` ä½œç‚º `value` çš„å€¼ï¼Œä¸¦ä»¥ `'h'` ä½œç‚º `unit_label` çš„å€¼ä¾†å‘¼å«è©²å‡½æ•¸ï¼Œæ‰€ä»¥ç¨‹å¼è¼¸å‡ºä¸­åŒ…å«äº†é€™äº›å€¼ã€‚

### é™³è¿°å¼èˆ‡è¡¨é”å¼ (Statements and Expressions)

å‡½æ•¸ä¸»é«”ç”±ä¸€ç³»åˆ—é™³è¿°å¼çµ„æˆï¼Œå¯é¸åœ°ä»¥è¡¨é”å¼çµå°¾ã€‚åˆ°ç›®å‰ç‚ºæ­¢ï¼Œæˆ‘å€‘è¨è«–çš„å‡½æ•¸æ²’æœ‰åŒ…å«çµå°¾çš„è¡¨é”å¼ï¼Œä½†ä½ å·²ç¶“çœ‹åˆ°ä¸€å€‹è¡¨é”å¼ä½œç‚ºé™³è¿°å¼çš„ä¸€éƒ¨åˆ†ã€‚å› ç‚º Rust æ˜¯ä¸€ç¨®åŸºæ–¼è¡¨é”å¼çš„èªè¨€ï¼Œæ‰€ä»¥ç†è§£é€™å€‹é‡è¦çš„å€åˆ¥å¾ˆé‡è¦ã€‚å…¶ä»–èªè¨€æ²’æœ‰ç›¸åŒçš„å€åˆ¥ï¼Œæ‰€ä»¥è®“æˆ‘å€‘çœ‹çœ‹é™³è¿°å¼å’Œè¡¨é”å¼æ˜¯ä»€éº¼ï¼Œä»¥åŠå®ƒå€‘çš„å·®ç•°å¦‚ä½•å½±éŸ¿å‡½æ•¸çš„ä¸»é«”ã€‚

*   é™³è¿°å¼ (Statements) æ˜¯åŸ·è¡ŒæŸäº›å‹•ä½œä¸”ä¸å›å‚³å€¼çš„æŒ‡ä»¤ã€‚
*   è¡¨é”å¼ (Expressions) å‰‡æœƒè¨ˆç®—å‡ºä¸€å€‹çµæœå€¼ã€‚

è®“æˆ‘å€‘çœ‹ä¸€äº›ä¾‹å­ã€‚

æˆ‘å€‘å¯¦éš›ä¸Šå·²ç¶“ä½¿ç”¨éé™³è¿°å¼å’Œè¡¨é”å¼ã€‚ä½¿ç”¨ `let` é—œéµå­—å»ºç«‹è®Šæ•¸ä¸¦ç‚ºå…¶è³¦å€¼å°±æ˜¯ä¸€å€‹é™³è¿°å¼ã€‚åœ¨æ¸…å–® 3-1 ä¸­ï¼Œ`let y = 6;` æ˜¯ä¸€å€‹é™³è¿°å¼ã€‚

src/main.rs

```rust
fn main() {
    let y = 6;
}
```

æ¸…å–® 3-1ï¼šåŒ…å«ä¸€å€‹é™³è¿°å¼çš„ `main` å‡½æ•¸å®£å‘Š

å‡½æ•¸å®šç¾©ä¹Ÿæ˜¯é™³è¿°å¼ï¼›æ•´å€‹ä¸Šè¿°ç¯„ä¾‹æœ¬èº«å°±æ˜¯ä¸€å€‹é™³è¿°å¼ã€‚ï¼ˆä¸éï¼Œæ­£å¦‚æˆ‘å€‘ç¨å¾Œå°‡çœ‹åˆ°çš„ï¼Œ*å‘¼å«*ä¸€å€‹å‡½æ•¸ä¸¦ä¸æ˜¯ä¸€å€‹é™³è¿°å¼ã€‚ï¼‰

é™³è¿°å¼ä¸å›å‚³å€¼ã€‚å› æ­¤ï¼Œä½ ä¸èƒ½å°‡ `let` é™³è¿°å¼è³¦å€¼çµ¦å¦ä¸€å€‹è®Šæ•¸ï¼Œå¦‚ä¸‹åˆ—ç¨‹å¼ç¢¼å˜—è©¦åŸ·è¡Œçš„é‚£æ¨£ï¼›ä½ æœƒå¾—åˆ°ä¸€å€‹éŒ¯èª¤ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let x = (let y = 6);
}
```

ç•¶ä½ åŸ·è¡Œé€™å€‹ç¨‹å¼æ™‚ï¼Œä½ æœƒå¾—åˆ°é¡ä¼¼é€™æ¨£çš„éŒ¯èª¤ï¼š

```
$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
error: expected expression, found `let` statement
 --> src/main.rs:2:14
  |
2 |     let x = (let y = 6);
  |              ^^^
  |
  = note: only supported directly in conditions of `if` and `while` expressions

warning: unnecessary parentheses around assigned value
 --> src/main.rs:2:13
  |
2 |     let x = (let y = 6);
  |             ^         ^
  |
  = note: `#[warn(unused_parens)]` on by default
help: remove these parentheses
  |
2 -     let x = (let y = 6);
2 +     let x = let y = 6;
  |

warning: `functions` (bin "functions") generated 1 warning
error: could not compile `functions` (bin "functions") due to 1 previous error; 1 warning emitted
```

`let y = 6` é™³è¿°å¼ä¸å›å‚³å€¼ï¼Œæ‰€ä»¥æ²’æœ‰ä»»ä½•æ±è¥¿å¯ä»¥è®“ `x` ç¶å®šã€‚é€™èˆ‡å…¶ä»–èªè¨€ï¼ˆä¾‹å¦‚ C å’Œ Rubyï¼‰ä¸­ç™¼ç”Ÿçš„æƒ…æ³ä¸åŒï¼Œåœ¨é‚£äº›èªè¨€ä¸­ï¼Œè³¦å€¼æœƒå›å‚³è³¦å€¼çš„å€¼ã€‚åœ¨é‚£äº›èªè¨€ä¸­ï¼Œä½ å¯ä»¥å¯« `x = y = 6`ï¼Œä¸¦ä¸” `x` å’Œ `y` éƒ½æœƒæœ‰å€¼ `6`ï¼›ä½†åœ¨ Rust ä¸­æƒ…æ³ä¸¦éå¦‚æ­¤ã€‚

è¡¨é”å¼ (Expressions) æœƒè¨ˆç®—å‡ºä¸€å€‹å€¼ï¼Œä¸¦æ§‹æˆä½ åœ¨ Rust ä¸­æœƒç·¨å¯«çš„å¤§éƒ¨åˆ†ç¨‹å¼ç¢¼ã€‚è€ƒæ…®ä¸€å€‹æ•¸å­¸é‹ç®—ï¼Œä¾‹å¦‚ `5 + 6`ï¼Œé€™æ˜¯ä¸€å€‹è¨ˆç®—å‡ºå€¼ `11` çš„è¡¨é”å¼ã€‚è¡¨é”å¼å¯ä»¥æ˜¯é™³è¿°å¼çš„ä¸€éƒ¨åˆ†ï¼šåœ¨æ¸…å–® 3-1 ä¸­ï¼Œé™³è¿°å¼ `let y = 6;` ä¸­çš„ `6` æ˜¯ä¸€å€‹è¨ˆç®—å‡ºå€¼ `6` çš„è¡¨é”å¼ã€‚å‘¼å«å‡½æ•¸æ˜¯ä¸€å€‹è¡¨é”å¼ã€‚å‘¼å« macro æ˜¯ä¸€å€‹è¡¨é”å¼ã€‚ç”¨å¤§æ‹¬è™Ÿå»ºç«‹çš„æ–°ç¯„åœå€å¡Šæ˜¯ä¸€å€‹è¡¨é”å¼ï¼Œä¾‹å¦‚ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let y = {
        let x = 3;
        x + 1
    };

    println!("The value of y is: {y}");
}
```

é€™å€‹è¡¨é”å¼ï¼š

```
{
    let x = 3;
    x + 1
}
```

æ˜¯ä¸€å€‹å€å¡Šï¼Œåœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œå®ƒçš„è¨ˆç®—çµæœç‚º `4`ã€‚è©²å€¼ä½œç‚º `let` é™³è¿°å¼çš„ä¸€éƒ¨åˆ†è¢«ç¶å®šåˆ° `y`ã€‚è«‹æ³¨æ„ï¼Œ`x + 1` é€™è¡Œæœ«å°¾æ²’æœ‰åˆ†è™Ÿï¼Œé€™èˆ‡ä½ ç›®å‰ç‚ºæ­¢çœ‹åˆ°çš„å¤§å¤šæ•¸è¡Œä¸åŒã€‚è¡¨é”å¼ä¸åŒ…å«çµå°¾åˆ†è™Ÿã€‚å¦‚æœä½ åœ¨è¡¨é”å¼æœ«å°¾æ·»åŠ åˆ†è™Ÿï¼Œä½ æœƒå°‡å…¶è®Šæˆä¸€å€‹é™³è¿°å¼ï¼Œç„¶å¾Œå®ƒå°‡ä¸å›å‚³å€¼ã€‚ç•¶ä½ æ¥ä¸‹ä¾†æ¢ç´¢å‡½æ•¸å›å‚³å€¼å’Œè¡¨é”å¼æ™‚ï¼Œè«‹è¨˜ä½é€™ä¸€é»ã€‚

### å¸¶æœ‰å›å‚³å€¼çš„å‡½æ•¸ (Functions with Return Values)

å‡½æ•¸å¯ä»¥å°‡å€¼å›å‚³çµ¦å‘¼å«å®ƒå€‘çš„ç¨‹å¼ç¢¼ã€‚æˆ‘å€‘ä¸å‘½åå›å‚³å€¼ï¼Œä½†æˆ‘å€‘å¿…é ˆåœ¨ç®­é ­ (`->`) å¾Œé¢å®£å‘Šå®ƒå€‘çš„å‹åˆ¥ã€‚åœ¨ Rust ä¸­ï¼Œå‡½æ•¸çš„å›å‚³å€¼èˆ‡å‡½æ•¸ä¸»é«”å€å¡Šä¸­æœ€å¾Œä¸€å€‹è¡¨é”å¼çš„å€¼æ˜¯åŒç¾©è©ã€‚ä½ å¯ä»¥ä½¿ç”¨ `return` é—œéµå­—ä¸¦æŒ‡å®šä¸€å€‹å€¼ä¾†ææ—©å¾å‡½æ•¸ä¸­å›å‚³ï¼Œä½†å¤§å¤šæ•¸å‡½æ•¸éƒ½æœƒéš±å¼åœ°å›å‚³æœ€å¾Œä¸€å€‹è¡¨é”å¼ã€‚é€™æ˜¯ä¸€å€‹å›å‚³å€¼çš„å‡½æ•¸ç¯„ä¾‹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn five() -> i32 {
    5
}

fn main() {
    let x = five();

    println!("The value of x is: {x}");
}
```

`five` å‡½æ•¸ä¸­æ²’æœ‰å‡½æ•¸å‘¼å«ã€macro ç”šè‡³ `let` é™³è¿°å¼â€”â€”åªæœ‰æ•¸å­— `5` æœ¬èº«ã€‚é€™åœ¨ Rust ä¸­æ˜¯ä¸€å€‹å®Œå…¨æœ‰æ•ˆçš„å‡½æ•¸ã€‚è«‹æ³¨æ„ï¼Œå‡½æ•¸çš„å›å‚³å‹åˆ¥ä¹ŸæŒ‡å®šç‚º `-> i32`ã€‚å˜—è©¦åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼ï¼›è¼¸å‡ºæ‡‰è©²æœƒåƒé€™æ¨£ï¼š

```
$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.30s
     Running `target/debug/functions`
The value of x is: 5
```

`five` ä¸­çš„ `5` æ˜¯å‡½æ•¸çš„å›å‚³å€¼ï¼Œé€™å°±æ˜¯ç‚ºä»€éº¼å›å‚³å‹åˆ¥æ˜¯ `i32`ã€‚è®“æˆ‘å€‘æ›´è©³ç´°åœ°æª¢è¦–é€™ä¸€é»ã€‚æœ‰å…©å€‹é‡è¦éƒ¨åˆ†ï¼šé¦–å…ˆï¼Œè¡Œ `let x = five();` é¡¯ç¤ºæˆ‘å€‘æ­£åœ¨ä½¿ç”¨å‡½æ•¸çš„å›å‚³å€¼ä¾†åˆå§‹åŒ–ä¸€å€‹è®Šæ•¸ã€‚å› ç‚ºå‡½æ•¸ `five` å›å‚³ `5`ï¼Œæ‰€ä»¥é€™è¡Œèˆ‡ä»¥ä¸‹å…§å®¹ç›¸åŒï¼š

```rust
let x = 5;
```

å…¶æ¬¡ï¼Œ`five` å‡½æ•¸æ²’æœ‰åƒæ•¸ï¼Œä¸¦å®šç¾©äº†å›å‚³å€¼çš„å‹åˆ¥ï¼Œä½†å‡½æ•¸çš„ä¸»é«”æ˜¯ä¸€å€‹å­¤é›¶é›¶çš„ `5`ï¼Œæ²’æœ‰åˆ†è™Ÿï¼Œå› ç‚ºå®ƒæ˜¯ä¸€å€‹æˆ‘å€‘æƒ³è¦å›å‚³å€¼çš„è¡¨é”å¼ã€‚

è®“æˆ‘å€‘çœ‹å¦ä¸€å€‹ç¯„ä¾‹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let x = plus_one(5);

    println!("The value of x is: {x}");
}

fn plus_one(x: i32) -> i32 {
    x + 1
}
```

åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼å°‡æœƒå°å‡º `The value of x is: 6`ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘å€‘åœ¨åŒ…å« `x + 1` çš„è¡Œæœ«å°¾åŠ ä¸Šä¸€å€‹åˆ†è™Ÿï¼Œå°‡å…¶å¾è¡¨é”å¼è®Šç‚ºé™³è¿°å¼ï¼Œæˆ‘å€‘å°‡æœƒå¾—åˆ°ä¸€å€‹éŒ¯èª¤ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let x = plus_one(5);

    println!("The value of x is: {x}");
}

fn plus_one(x: i32) -> i32 {
    x + 1;
}
```

ç·¨è­¯é€™æ®µç¨‹å¼ç¢¼æœƒç”¢ç”ŸéŒ¯èª¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
$ cargo run
   Compiling functions v0.1.0 (file:///projects/functions)
error[E0308]: mismatched types
 --> src/main.rs:7:24
  |
7 | fn plus_one(x: i32) -> i32 {
  |    --------            ^^^ expected `i32`, found `()`
  |    |
  |    implicitly returns `()` as its body has no tail or `return` expression
8 |     x + 1;
  |          - help: remove this semicolon to return this value

For more information about this error, try `rustc --explain E0308`.
error: could not compile `functions` (bin "functions") due to 1 previous error
```

ä¸»è¦çš„éŒ¯èª¤è¨Šæ¯ `mismatched types` æ­ç¤ºäº†æ­¤ç¨‹å¼ç¢¼çš„æ ¸å¿ƒå•é¡Œã€‚å‡½æ•¸ `plus_one` çš„å®šç¾©è¡¨æ˜å®ƒå°‡å›å‚³ä¸€å€‹ `i32`ï¼Œä½†é™³è¿°å¼ä¸æœƒè¨ˆç®—å‡ºä¸€å€‹å€¼ï¼Œé€™ç”± `()`ï¼ˆunit typeï¼‰è¡¨ç¤ºã€‚å› æ­¤ï¼Œæ²’æœ‰ä»»ä½•æ±è¥¿è¢«å›å‚³ï¼Œé€™èˆ‡å‡½æ•¸å®šç¾©ç›¸çŸ›ç›¾ä¸¦å°è‡´éŒ¯èª¤ã€‚åœ¨æ­¤è¼¸å‡ºä¸­ï¼ŒRust æä¾›äº†ä¸€æ¢è¨Šæ¯ï¼Œå¯èƒ½å¯ä»¥å¹«åŠ©è§£æ±ºæ­¤å•é¡Œï¼šå®ƒå»ºè­°åˆªé™¤åˆ†è™Ÿï¼Œé€™å°‡æœƒä¿®å¾©éŒ¯èª¤ã€‚

## è¨»è§£ (Comments)

æ‰€æœ‰ç¨‹å¼è¨­è¨ˆå¸«éƒ½åŠªåŠ›è®“ä»–å€‘çš„ç¨‹å¼ç¢¼æ˜“æ–¼ç†è§£ï¼Œä½†æœ‰æ™‚éœ€è¦é¡å¤–çš„è§£é‡‹ã€‚åœ¨é€™äº›æƒ…æ³ä¸‹ï¼Œç¨‹å¼è¨­è¨ˆå¸«æœƒåœ¨åŸå§‹ç¢¼ä¸­ç•™ä¸‹*è¨»è§£* (comments)ï¼Œé€™äº›è¨»è§£å°‡è¢«ç·¨è­¯å™¨å¿½ç•¥ï¼Œä½†å°æ–¼é–±è®€åŸå§‹ç¢¼çš„äººä¾†èªªå¯èƒ½å¾ˆæœ‰ç”¨ã€‚

é€™æ˜¯ä¸€å€‹ç°¡å–®çš„è¨»è§£ï¼š

```
// hello, world
```

åœ¨ Rust ä¸­ï¼Œæ…£ç”¨çš„è¨»è§£é¢¨æ ¼æ˜¯ä»¥å…©å€‹æ–œç·šé–‹é ­ï¼Œè¨»è§£æŒçºŒåˆ°è¡Œå°¾ã€‚å°æ–¼è¶…éå–®è¡Œçš„è¨»è§£ï¼Œä½ éœ€è¦åœ¨æ¯è¡Œéƒ½åŒ…å« `//`ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
// So we're doing something complicated here, long enough that we need
// multiple lines of comments to do it! Whew! Hopefully, this comment will
// explain what's going on.
```

è¨»è§£ä¹Ÿå¯ä»¥æ”¾åœ¨åŒ…å«ç¨‹å¼ç¢¼çš„è¡Œå°¾ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let lucky_number = 7; // I'm feeling lucky today
}
```

ä½†ä½ æ›´å¸¸æœƒçœ‹åˆ°å®ƒå€‘ä»¥é€™ç¨®æ ¼å¼ä½¿ç”¨ï¼Œè¨»è§£æ”¾åœ¨å…¶æ‰€è¨»é‡‹çš„ç¨‹å¼ç¢¼ä¸Šæ–¹å–®ç¨ä¸€è¡Œï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    // I'm feeling lucky today
    let lucky_number = 7;
}
```

Rust é‚„æœ‰å¦ä¸€ç¨®è¨»è§£ï¼Œå³æ–‡ä»¶è¨»è§£ (documentation comments)ï¼Œæˆ‘å€‘å°‡åœ¨[ç¬¬åå››ç« ](https://doc.rust-lang.org/book/ch14-02-publishing-to-crates-io.html#publishing-a-crate-to-cratesio)çš„ã€Œ[ç™¼å¸ƒ crate åˆ° Crates.io](https://doc.rust-lang.org/book/ch14-02-publishing-to-crates-io.html#publishing-a-crate-to-cratesio)ã€ä¸€ç¯€ä¸­è¨è«–ã€‚

## æ§åˆ¶æµç¨‹ (Control Flow)

æ ¹æ“šæ¢ä»¶æ˜¯å¦ç‚º `true` ä¾†åŸ·è¡ŒæŸäº›ç¨‹å¼ç¢¼ï¼Œä»¥åŠåœ¨æ¢ä»¶ç‚º `true` æ™‚é‡è¤‡åŸ·è¡ŒæŸäº›ç¨‹å¼ç¢¼ï¼Œæ˜¯å¤§å¤šæ•¸ç¨‹å¼èªè¨€ä¸­çš„åŸºæœ¬çµ„æˆéƒ¨åˆ†ã€‚åœ¨ Rust ç¨‹å¼ç¢¼ä¸­ï¼Œæœ€å¸¸ç”¨çš„æ§åˆ¶åŸ·è¡Œæµç¨‹çš„çµæ§‹æ˜¯ `if` è¡¨é”å¼å’Œè¿´åœˆ (loops)ã€‚

### if è¡¨é”å¼ (if Expressions)

`if` è¡¨é”å¼å…è¨±ä½ æ ¹æ“šæ¢ä»¶ä¾†åˆ†æ”¯ä½ çš„ç¨‹å¼ç¢¼ã€‚ä½ æä¾›ä¸€å€‹æ¢ä»¶ï¼Œç„¶å¾Œè²æ˜ï¼šã€Œå¦‚æœæ»¿è¶³é€™å€‹æ¢ä»¶ï¼Œå°±åŸ·è¡Œé€™å€‹ç¨‹å¼ç¢¼å€å¡Šã€‚å¦‚æœæ¢ä»¶ä¸æ»¿è¶³ï¼Œå°±ä¸è¦åŸ·è¡Œé€™å€‹ç¨‹å¼ç¢¼å€å¡Šã€‚ã€

åœ¨ä½ çš„ *projects* ç›®éŒ„ä¸­å»ºç«‹ä¸€å€‹åç‚º *branches* çš„æ–°å°ˆæ¡ˆï¼Œä»¥æ¢ç´¢ `if` è¡¨é”å¼ã€‚åœ¨ *src/main.rs* æª”æ¡ˆä¸­ï¼Œè¼¸å…¥ä»¥ä¸‹å…§å®¹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let number = 3;

    if number < 5 {
        println!("condition was true");
    } else {
        println!("condition was false");
    }
}
```

æ‰€æœ‰ `if` è¡¨é”å¼éƒ½ä»¥é—œéµå­— `if` é–‹é ­ï¼Œå¾Œè·Ÿä¸€å€‹æ¢ä»¶ã€‚åœ¨æ­¤æƒ…æ³ä¸‹ï¼Œæ¢ä»¶æª¢æŸ¥è®Šæ•¸ `number` çš„å€¼æ˜¯å¦å°æ–¼ 5ã€‚å¦‚æœæ¢ä»¶ç‚º `true`ï¼Œæˆ‘å€‘å°‡è¦åŸ·è¡Œçš„ç¨‹å¼ç¢¼å€å¡Šç·Šæ¥åœ¨æ¢ä»¶ä¹‹å¾Œï¼Œæ”¾åœ¨å¤§æ‹¬è™Ÿå…§ã€‚èˆ‡ `if` è¡¨é”å¼ä¸­çš„æ¢ä»¶ç›¸é—œè¯çš„ç¨‹å¼ç¢¼å€å¡Šæœ‰æ™‚ç¨±ç‚º*åˆ†æ”¯* (arms)ï¼Œå°±åƒæˆ‘å€‘åœ¨[ç¬¬äºŒç« ](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html)ã€Œ[æ¯”è¼ƒçŒœæ¸¬èˆ‡ç§˜å¯†æ•¸å­—](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html#comparing-the-guess-to-the-secret-number)ã€ä¸€ç¯€ä¸­è¨è«–çš„ `match` è¡¨é”å¼ä¸­çš„åˆ†æ”¯ä¸€æ¨£ã€‚

å¯é¸åœ°ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥åŒ…å«ä¸€å€‹ `else` è¡¨é”å¼ï¼Œæˆ‘å€‘åœ¨é€™è£¡é¸æ“‡é€™æ¨£åšï¼Œä»¥ä¾¿åœ¨æ¢ä»¶è©•ä¼°ç‚º `false` æ™‚ç‚ºç¨‹å¼æä¾›ä¸€å€‹æ›¿ä»£çš„ç¨‹å¼ç¢¼å€å¡Šä¾†åŸ·è¡Œã€‚å¦‚æœä½ æ²’æœ‰æä¾› `else` è¡¨é”å¼ä¸¦ä¸”æ¢ä»¶ç‚º `false`ï¼Œç¨‹å¼å°‡æœƒè·³é `if` å€å¡Šä¸¦ç¹¼çºŒåŸ·è¡Œä¸‹ä¸€æ®µç¨‹å¼ç¢¼ã€‚

å˜—è©¦åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼ï¼›ä½ æ‡‰è©²æœƒçœ‹åˆ°ä»¥ä¸‹è¼¸å‡ºï¼š

```
$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/branches`
condition was true
```

è®“æˆ‘å€‘è©¦è‘—å°‡ `number` çš„å€¼æ›´æ”¹ç‚ºä¸€å€‹ä½¿æ¢ä»¶ç‚º `false` çš„å€¼ï¼Œçœ‹çœ‹æœƒç™¼ç”Ÿä»€éº¼ï¼š

```rust
    let number = 7;
```

å†æ¬¡åŸ·è¡Œç¨‹å¼ï¼Œä¸¦æŸ¥çœ‹è¼¸å‡ºï¼š

```
$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/branches`
condition was false
```

é‚„å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé€™æ®µç¨‹å¼ç¢¼ä¸­çš„æ¢ä»¶*å¿…é ˆ*æ˜¯ `bool` å‹åˆ¥ã€‚å¦‚æœæ¢ä»¶ä¸æ˜¯ `bool` å‹åˆ¥ï¼Œæˆ‘å€‘å°±æœƒå¾—åˆ°ä¸€å€‹éŒ¯èª¤ã€‚ä¾‹å¦‚ï¼Œå˜—è©¦åŸ·è¡Œä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let number = 3;

    if number {
        println!("number was three");
    }
}
```

é€™æ¬¡ `if` æ¢ä»¶è©•ä¼°ç‚ºå€¼ `3`ï¼ŒRust æ‹‹å‡ºäº†ä¸€å€‹éŒ¯èª¤ï¼š

```
$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
error[E0308]: mismatched types
 --> src/main.rs:4:8
  |
4 |     if number {
  |        ^^^^^^ expected `bool`, found integer

For more information about this error, try `rustc --explain E0308`.
error: could not compile `branches` (bin "branches") due to 1 previous error
```

éŒ¯èª¤è¨Šæ¯è¡¨æ˜ Rust é æœŸçš„æ˜¯ `bool` å‹åˆ¥ï¼Œä½†å»å¾—åˆ°äº†æ•´æ•¸å‹åˆ¥ã€‚èˆ‡ Ruby å’Œ JavaScript ç­‰èªè¨€ä¸åŒï¼ŒRust ä¸æœƒè‡ªå‹•å˜—è©¦å°‡éå¸ƒæ—å‹åˆ¥è½‰æ›ç‚ºå¸ƒæ—å‹åˆ¥ã€‚ä½ å¿…é ˆæ˜ç¢ºåœ°æä¾› `if` ä¸€å€‹å¸ƒæ—å€¼ä½œç‚ºå…¶æ¢ä»¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘å€‘å¸Œæœ› `if` ç¨‹å¼ç¢¼å€å¡Šåƒ…åœ¨æ•¸å­—ä¸ç­‰æ–¼ `0` æ™‚æ‰é‹è¡Œï¼Œæˆ‘å€‘å¯ä»¥å°‡ `if` è¡¨é”å¼æ›´æ”¹ç‚ºä»¥ä¸‹å…§å®¹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let number = 3;

    if number != 0 {
        println!("number was something other than zero");
    }
}
```

åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼å°‡æœƒå°å‡º `number was something other than zero`ã€‚

#### ä½¿ç”¨ `else if` è™•ç†å¤šå€‹æ¢ä»¶ (Handling Multiple Conditions with else if)

ä½ å¯ä»¥é€éåœ¨ `else if` è¡¨é”å¼ä¸­çµåˆ `if` å’Œ `else` ä¾†ä½¿ç”¨å¤šå€‹æ¢ä»¶ã€‚ä¾‹å¦‚ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let number = 6;

    if number % 4 == 0 {
        println!("number is divisible by 4");
    } else if number % 3 == 0 {
        println!("number is divisible by 3");
    } else if number % 2 == 0 {
        println!("number is divisible by 2");
    } else {
        println!("number is not divisible by 4, 3, or 2");
    }
}
```

é€™å€‹ç¨‹å¼æœ‰å››ç¨®å¯èƒ½çš„åŸ·è¡Œè·¯å¾‘ã€‚åŸ·è¡Œå¾Œï¼Œä½ æ‡‰è©²æœƒçœ‹åˆ°ä»¥ä¸‹è¼¸å‡ºï¼š

```
$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.31s
     Running `target/debug/branches`
number is divisible by 3
```

ç•¶é€™å€‹ç¨‹å¼åŸ·è¡Œæ™‚ï¼Œå®ƒæœƒä¾åºæª¢æŸ¥æ¯å€‹ `if` è¡¨é”å¼ï¼Œä¸¦åŸ·è¡Œæ¢ä»¶è©•ä¼°ç‚º `true` çš„ç¬¬ä¸€å€‹å€å¡Šã€‚è«‹æ³¨æ„ï¼Œå³ä½¿ 6 å¯ä»¥è¢« 2 æ•´é™¤ï¼Œæˆ‘å€‘ä¹Ÿä¸æœƒçœ‹åˆ°è¼¸å‡º `number is divisible by 2`ï¼Œä¹Ÿä¸æœƒçœ‹åˆ° `else` å€å¡Šä¸­çš„ `number is not divisible by 4, 3, or 2` æ–‡æœ¬ã€‚é€™æ˜¯å› ç‚º Rust åªåŸ·è¡Œç¬¬ä¸€å€‹ `true` æ¢ä»¶çš„å€å¡Šï¼Œä¸€æ—¦æ‰¾åˆ°ä¸€å€‹ï¼Œå®ƒç”šè‡³ä¸æœƒæª¢æŸ¥å…¶é¤˜çš„ã€‚

ä½¿ç”¨éå¤šçš„ `else if` è¡¨é”å¼æœƒä½¿ä½ çš„ç¨‹å¼ç¢¼è®Šå¾—æ··äº‚ï¼Œæ‰€ä»¥å¦‚æœä½ æœ‰å¤šå€‹ `else if` è¡¨é”å¼ï¼Œä½ å¯èƒ½éœ€è¦é‡æ§‹ä½ çš„ç¨‹å¼ç¢¼ã€‚ç¬¬å…­ç« æè¿°äº†ä¸€ç¨®å¼·å¤§çš„ Rust åˆ†æ”¯çµæ§‹ï¼Œç¨±ç‚º `match`ï¼Œç”¨æ–¼è™•ç†é€™äº›æƒ…æ³ã€‚

#### åœ¨ `let` é™³è¿°å¼ä¸­ä½¿ç”¨ `if` (Using if in a let Statement)

å› ç‚º `if` æ˜¯ä¸€å€‹è¡¨é”å¼ï¼Œæˆ‘å€‘å¯ä»¥åœ¨ `let` é™³è¿°å¼çš„å³å´ä½¿ç”¨å®ƒï¼Œå°‡çµæœè³¦å€¼çµ¦ä¸€å€‹è®Šæ•¸ï¼Œå¦‚æ¸…å–® 3-2 æ‰€ç¤ºã€‚

src/main.rs

```rust
fn main() {
    let condition = true;
    let number = if condition { 5 } else { 6 };

    println!("The value of number is: {number}");
}
```

æ¸…å–® 3-2ï¼šå°‡ `if` è¡¨é”å¼çš„çµæœè³¦å€¼çµ¦è®Šæ•¸

`number` è®Šæ•¸å°‡æ ¹æ“š `if` è¡¨é”å¼çš„çµæœç¶å®šåˆ°ä¸€å€‹å€¼ã€‚åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼ä»¥æŸ¥çœ‹æœƒç™¼ç”Ÿä»€éº¼ï¼š

```
$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.30s
     Running `target/debug/branches`
The value of number is: 5
```

è«‹è¨˜ä½ï¼Œç¨‹å¼ç¢¼å€å¡Šæœƒè©•ä¼°ç‚ºå…¶ä¸­çš„æœ€å¾Œä¸€å€‹è¡¨é”å¼ï¼Œè€Œæ•¸å­—æœ¬èº«ä¹Ÿæ˜¯è¡¨é”å¼ã€‚åœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œæ•´å€‹ `if` è¡¨é”å¼çš„å€¼å–æ±ºæ–¼å“ªå€‹ç¨‹å¼ç¢¼å€å¡ŠåŸ·è¡Œã€‚é€™æ„å‘³è‘—æ¯å€‹ `if` åˆ†æ”¯ä¸­å¯èƒ½ç”¢ç”Ÿçš„å€¼å¿…é ˆæ˜¯ç›¸åŒçš„å‹åˆ¥ï¼›åœ¨æ¸…å–® 3-2 ä¸­ï¼Œ`if` åˆ†æ”¯å’Œ `else` åˆ†æ”¯çš„çµæœéƒ½æ˜¯ `i32` æ•´æ•¸ã€‚å¦‚æœå‹åˆ¥ä¸åŒ¹é…ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼Œæˆ‘å€‘å°‡æœƒå¾—åˆ°ä¸€å€‹éŒ¯èª¤ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    let condition = true;

    let number = if condition { 5 } else { "six" };

    println!("The value of number is: {number}");
}
```

ç•¶æˆ‘å€‘å˜—è©¦ç·¨è­¯é€™æ®µç¨‹å¼ç¢¼æ™‚ï¼Œæˆ‘å€‘æœƒå¾—åˆ°ä¸€å€‹éŒ¯èª¤ã€‚`if` å’Œ `else` åˆ†æ”¯çš„å€¼å‹åˆ¥ä¸ç›¸å®¹ï¼ŒRust æœƒç²¾ç¢ºåœ°æŒ‡å‡ºåœ¨ç¨‹å¼ä¸­å“ªè£¡æ‰¾åˆ°å•é¡Œï¼š

```
$ cargo run
   Compiling branches v0.1.0 (file:///projects/branches)
error[E0308]: `if` and `else` have incompatible types
 --> src/main.rs:4:44
  |
4 |     let number = if condition { 5 } else { "six" };
  |                                 -          ^^^^^ expected integer, found `&str`
  |                                 |
  |                                 expected because of this

For more information about this error, try `rustc --explain E0308`.
error: could not compile `branches` (bin "branches") due to 1 previous error
```

`if` å€å¡Šä¸­çš„è¡¨é”å¼è©•ä¼°ç‚ºæ•´æ•¸ï¼Œè€Œ `else` å€å¡Šä¸­çš„è¡¨é”å¼è©•ä¼°ç‚ºå­—ä¸²ã€‚é€™å°‡ä¸èµ·ä½œç”¨ï¼Œå› ç‚ºè®Šæ•¸å¿…é ˆå…·æœ‰å–®ä¸€å‹åˆ¥ï¼Œä¸¦ä¸” Rust éœ€è¦åœ¨ç·¨è­¯æ™‚ç¢ºå®š `number` è®Šæ•¸çš„å‹åˆ¥ã€‚çŸ¥é“ `number` çš„å‹åˆ¥å¯ä»¥è®“ç·¨è­¯å™¨é©—è­‰æˆ‘å€‘ä½¿ç”¨ `number` çš„æ¯å€‹åœ°æ–¹çš„å‹åˆ¥éƒ½æ˜¯æœ‰æ•ˆçš„ã€‚å¦‚æœ `number` çš„å‹åˆ¥åƒ…åœ¨åŸ·è¡Œæ™‚ç¢ºå®šï¼ŒRust å°‡ç„¡æ³•åšåˆ°é€™ä¸€é»ï¼›å¦‚æœç·¨è­¯å™¨å¿…é ˆè¿½è¹¤ä»»ä½•è®Šæ•¸çš„å¤šå€‹å‡è¨­å‹åˆ¥ï¼Œå®ƒå°‡æœƒæ›´è¤‡é›œï¼Œä¸¦ä¸”å°ç¨‹å¼ç¢¼çš„ä¿è­‰ä¹Ÿæœƒæ¸›å°‘ã€‚

### ä½¿ç”¨è¿´åœˆé‡è¤‡åŸ·è¡Œ (Repetition with Loops)

é‡è¤‡åŸ·è¡Œä¸€å€‹ç¨‹å¼ç¢¼å€å¡Šé€šå¸¸å¾ˆæœ‰ç”¨ã€‚ç‚ºæ­¤ï¼ŒRust æä¾›äº†å¹¾ç¨®*è¿´åœˆ* (loops)ï¼Œå®ƒå€‘å°‡é‡è¤‡åŸ·è¡Œè¿´åœˆä¸»é«”å…§çš„ç¨‹å¼ç¢¼ç›´åˆ°çµæŸï¼Œç„¶å¾Œç«‹å³å¾é ­é–‹å§‹ã€‚ç‚ºäº†å¯¦é©—è¿´åœˆï¼Œè®“æˆ‘å€‘å»ºç«‹ä¸€å€‹åç‚º *loops* çš„æ–°å°ˆæ¡ˆã€‚

Rust æœ‰ä¸‰ç¨®è¿´åœˆï¼š`loop`ã€`while` å’Œ `for`ã€‚è®“æˆ‘å€‘é€ä¸€å˜—è©¦ã€‚

#### ä½¿ç”¨ `loop` é‡è¤‡ç¨‹å¼ç¢¼ (Repeating Code with loop)

`loop` é—œéµå­—å‘Šè¨´ Rust ä¸æ–·é‡è¤‡åŸ·è¡Œä¸€å€‹ç¨‹å¼ç¢¼å€å¡Šï¼Œç›´åˆ°ä½ æ˜ç¢ºåœ°å‘Šè¨´å®ƒåœæ­¢ç‚ºæ­¢ã€‚

ä¾‹å¦‚ï¼Œå°‡ä½  *loops* ç›®éŒ„ä¸­çš„ *src/main.rs* æª”æ¡ˆæ›´æ”¹ç‚ºä»¥ä¸‹å…§å®¹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    loop {
        println!("again!");
    }
}
```

ç•¶æˆ‘å€‘åŸ·è¡Œé€™å€‹ç¨‹å¼æ™‚ï¼Œæˆ‘å€‘æœƒçœ‹åˆ° `again!` ä¸æ–·é‡è¤‡å°å‡ºï¼Œç›´åˆ°æˆ‘å€‘æ‰‹å‹•åœæ­¢ç¨‹å¼ã€‚å¤§å¤šæ•¸çµ‚ç«¯æ©Ÿéƒ½æ”¯æ´ <kbd>ctrl</kbd>-<kbd>c</kbd> éµç›¤å¿«æ·éµä¾†ä¸­æ–·ä¸€å€‹é™·å…¥é€£çºŒè¿´åœˆçš„ç¨‹å¼ã€‚è©¦è©¦çœ‹ï¼š

```
$ cargo run
   Compiling loops v0.1.0 (file:///projects/loops)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.08s
     Running `target/debug/loops`
again!
again!
again!
again!
^Cagain!
```

ç¬¦è™Ÿ `^C` ä»£è¡¨ä½ æŒ‰ä¸‹ <kbd>ctrl</kbd>-<kbd>c</kbd> çš„ä½ç½®ã€‚

ä½ å¯èƒ½æœƒæˆ–å¯èƒ½ä¸æœƒåœ¨ `^C` å¾Œé¢çœ‹åˆ° `again!` é€™å€‹è©ï¼Œé€™å–æ±ºæ–¼ç¨‹å¼ç¢¼åœ¨æ”¶åˆ°ä¸­æ–·è¨Šè™Ÿæ™‚åœ¨è¿´åœˆä¸­çš„ä½ç½®ã€‚

å¹¸é‹çš„æ˜¯ï¼ŒRust ä¹Ÿæä¾›äº†ä¸€ç¨®é€éç¨‹å¼ç¢¼è·³å‡ºè¿´åœˆçš„æ–¹æ³•ã€‚ä½ å¯ä»¥åœ¨è¿´åœˆå…§æ”¾ç½® `break` é—œéµå­—ä¾†å‘Šè¨´ç¨‹å¼ä½•æ™‚åœæ­¢åŸ·è¡Œè¿´åœˆã€‚å›æƒ³ä¸€ä¸‹ï¼Œæˆ‘å€‘åœ¨[ç¬¬äºŒç« ](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html)ã€Œ[çŒœå°å¾Œé€€å‡º](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html#quitting-after-a-correct-guess)ã€ä¸€ç¯€ä¸­çš„çŒœæ•¸å­—éŠæˆ²ä¸­é€™æ¨£åšï¼Œç•¶ä½¿ç”¨è€…çŒœå°æ•¸å­—è´å¾—éŠæˆ²æ™‚é€€å‡ºç¨‹å¼ã€‚

æˆ‘å€‘ä¹Ÿåœ¨çŒœæ•¸å­—éŠæˆ²ä¸­ä½¿ç”¨äº† `continue`ï¼Œå®ƒåœ¨è¿´åœˆä¸­å‘Šè¨´ç¨‹å¼è·³éé€™æ¬¡è¿´åœˆè¿­ä»£ä¸­æ‰€æœ‰å‰©é¤˜çš„ç¨‹å¼ç¢¼ï¼Œä¸¦é€²å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚

#### å¾è¿´åœˆå›å‚³å€¼ (Returning Values from Loops)

`loop` çš„å…¶ä¸­ä¸€å€‹ç”¨é€”æ˜¯é‡è©¦ä½ å¯èƒ½çŸ¥é“æœƒå¤±æ•—çš„æ“ä½œï¼Œä¾‹å¦‚æª¢æŸ¥åŸ·è¡Œç·’æ˜¯å¦å·²å®Œæˆå…¶å·¥ä½œã€‚ä½ å¯èƒ½é‚„éœ€è¦å°‡è©²æ“ä½œçš„çµæœå¾è¿´åœˆä¸­å‚³éçµ¦ç¨‹å¼ç¢¼çš„å…¶é¤˜éƒ¨åˆ†ã€‚ç‚ºæ­¤ï¼Œä½ å¯ä»¥åœ¨ç”¨æ–¼åœæ­¢è¿´åœˆçš„ `break` è¡¨é”å¼å¾Œæ·»åŠ ä½ æƒ³è¦å›å‚³çš„å€¼ï¼›è©²å€¼å°‡å¾è¿´åœˆä¸­å›å‚³ï¼Œä»¥ä¾¿ä½ å¯ä»¥ä½¿ç”¨å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
fn main() {
    let mut counter = 0;

    let result = loop {
        counter += 1;

        if counter == 10 {
            break counter * 2;
        }
    };

    println!("The result is {result}");
}
```

åœ¨è¿´åœˆä¹‹å‰ï¼Œæˆ‘å€‘å®£å‘Šä¸€å€‹åç‚º `counter` çš„è®Šæ•¸ä¸¦å°‡å…¶åˆå§‹åŒ–ç‚º `0`ã€‚ç„¶å¾Œæˆ‘å€‘å®£å‘Šä¸€å€‹åç‚º `result` çš„è®Šæ•¸ä¾†å„²å­˜å¾è¿´åœˆå›å‚³çš„å€¼ã€‚åœ¨è¿´åœˆçš„æ¯æ¬¡è¿­ä»£ä¸­ï¼Œæˆ‘å€‘å°‡ `1` åŠ åˆ° `counter` è®Šæ•¸ä¸­ï¼Œç„¶å¾Œæª¢æŸ¥ `counter` æ˜¯å¦ç­‰æ–¼ `10`ã€‚ç•¶å®ƒç­‰æ–¼ `10` æ™‚ï¼Œæˆ‘å€‘ä½¿ç”¨ `break` é—œéµå­—å’Œå€¼ `counter * 2`ã€‚åœ¨è¿´åœˆä¹‹å¾Œï¼Œæˆ‘å€‘ä½¿ç”¨åˆ†è™Ÿä¾†çµæŸå°‡å€¼è³¦å€¼çµ¦ `result` çš„é™³è¿°å¼ã€‚æœ€å¾Œï¼Œæˆ‘å€‘å°å‡º `result` ä¸­çš„å€¼ï¼Œåœ¨é€™å€‹ä¾‹å­ä¸­æ˜¯ `20`ã€‚

ä½ ä¹Ÿå¯ä»¥å¾è¿´åœˆå…§éƒ¨ `return`ã€‚é›–ç„¶ `break` åªæœƒé€€å‡ºç›®å‰çš„è¿´åœˆï¼Œä½† `return` ç¸½æ˜¯æœƒé€€å‡ºç›®å‰çš„å‡½æ•¸ã€‚

#### è¿´åœˆæ¨™ç±¤ä»¥å€åˆ†å¤šå€‹è¿´åœˆ (Loop Labels to Disambiguate Between Multiple Loops)

å¦‚æœä½ çš„è¿´åœˆä¸­é‚„æœ‰è¿´åœˆï¼Œé‚£éº¼ `break` å’Œ `continue` å°‡ä½œç”¨æ–¼ç•¶æ™‚æœ€å…§å±¤çš„è¿´åœˆã€‚ä½ å¯ä»¥é¸æ“‡åœ¨è¿´åœˆä¸ŠæŒ‡å®šä¸€å€‹*è¿´åœˆæ¨™ç±¤* (loop label)ï¼Œç„¶å¾Œä½ å¯ä»¥æ­é… `break` æˆ– `continue` ä½¿ç”¨è©²æ¨™ç±¤ï¼Œä»¥æŒ‡å®šé€™äº›é—œéµå­—ä½œç”¨æ–¼è©²æ¨™ç±¤æ‰€æŒ‡çš„è¿´åœˆï¼Œè€Œä¸æ˜¯æœ€å…§å±¤çš„è¿´åœˆã€‚è¿´åœˆæ¨™ç±¤å¿…é ˆä»¥å–®å¼•è™Ÿé–‹é ­ã€‚ä»¥ä¸‹æ˜¯ä¸€å€‹åŒ…å«å…©å€‹å·¢ç‹€è¿´åœˆçš„ç¯„ä¾‹ï¼š

```rust
fn main() {
    let mut count = 0;
    'counting_up: loop {
        println!("count = {count}");
        let mut remaining = 10;

        loop {
            println!("remaining = {remaining}");
            if remaining == 9 {
                break;
            }
            if count == 2 {
                break 'counting_up;
            }
            remaining -= 1;
        }

        count += 1;
    }
    println!("End count = {count}");
}
```

å¤–å±¤è¿´åœˆæœ‰æ¨™ç±¤ `'counting_up`ï¼Œå®ƒå°‡å¾ 0 æ•¸åˆ° 2ã€‚ä¸å¸¶æ¨™ç±¤çš„å…§å±¤è¿´åœˆå¾ 10 å€’æ•¸åˆ° 9ã€‚ç¬¬ä¸€å€‹æ²’æœ‰æŒ‡å®šæ¨™ç±¤çš„ `break` åªæœƒé€€å‡ºå…§å±¤è¿´åœˆã€‚`break 'counting_up;` é™³è¿°å¼å°‡é€€å‡ºå¤–å±¤è¿´åœˆã€‚é€™æ®µç¨‹å¼ç¢¼å°å‡ºï¼š

```
$ cargo run
   Compiling loops v0.1.0 (file:///projects/loops)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.58s
     Running `target/debug/loops`
count = 0
remaining = 10
remaining = 9
count = 1
remaining = 10
remaining = 9
count = 2
remaining = 10
End count = 2
```

#### ä½¿ç”¨ `while` é€²è¡Œæ¢ä»¶å¼è¿´åœˆ (Conditional Loops with while)

ç¨‹å¼ç¶“å¸¸éœ€è¦åœ¨è¿´åœˆä¸­è©•ä¼°ä¸€å€‹æ¢ä»¶ã€‚ç•¶æ¢ä»¶ç‚º `true` æ™‚ï¼Œè¿´åœˆåŸ·è¡Œã€‚ç•¶æ¢ä»¶ä¸å†ç‚º `true` æ™‚ï¼Œç¨‹å¼å‘¼å« `break`ï¼Œåœæ­¢è¿´åœˆã€‚ä½¿ç”¨ `loop`ã€`if`ã€`else` å’Œ `break` çš„çµ„åˆå¯ä»¥å¯¦ç¾é€™ç¨®è¡Œç‚ºï¼›å¦‚æœä½ é¡˜æ„ï¼Œä½ ç¾åœ¨å°±å¯ä»¥åœ¨ç¨‹å¼ä¸­å˜—è©¦ã€‚ç„¶è€Œï¼Œé€™ç¨®æ¨¡å¼éå¸¸å¸¸è¦‹ï¼Œä»¥è‡³æ–¼ Rust æœ‰ä¸€å€‹å…§å»ºçš„èªè¨€çµæ§‹ï¼Œç¨±ç‚º `while` è¿´åœˆã€‚åœ¨æ¸…å–® 3-3 ä¸­ï¼Œæˆ‘å€‘ä½¿ç”¨ `while` è¿´åœˆä¸‰æ¬¡ï¼Œæ¯æ¬¡å€’æ•¸ï¼Œç„¶å¾Œåœ¨è¿´åœˆçµæŸå¾Œï¼Œå°å‡ºä¸€æ¢è¨Šæ¯ä¸¦é€€å‡ºã€‚

src/main.rs

```rust
fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{number}!");

        number -= 1;
    }

    println!("LIFTOFF!!!");
}
```

æ¸…å–® 3-3ï¼šä½¿ç”¨ `while` è¿´åœˆåœ¨æ¢ä»¶è©•ä¼°ç‚º `true` æ™‚åŸ·è¡Œç¨‹å¼ç¢¼

é€™å€‹çµæ§‹æ¶ˆé™¤äº†ä½¿ç”¨ `loop`ã€`if`ã€`else` å’Œ `break` æ‰€éœ€çš„è¨±å¤šå·¢ç‹€çµæ§‹ï¼Œä¸¦ä¸”å®ƒæ›´æ¸…æ™°ã€‚ç•¶æ¢ä»¶è©•ä¼°ç‚º `true` æ™‚ï¼Œç¨‹å¼ç¢¼é‹è¡Œï¼›å¦å‰‡ï¼Œå®ƒæœƒé€€å‡ºè¿´åœˆã€‚

#### ä½¿ç”¨ `for` è¿´åœˆéæ­·é›†åˆ (Looping Through a Collection with for)

ä½ å¯ä»¥é¸æ“‡ä½¿ç”¨ `while` çµæ§‹ä¾†éæ­·é›†åˆï¼ˆä¾‹å¦‚é™£åˆ—ï¼‰çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œæ¸…å–® 3-4 ä¸­çš„è¿´åœˆå°å‡ºé™£åˆ— `a` ä¸­çš„æ¯å€‹å…ƒç´ ã€‚

src/main.rs

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];
    let mut index = 0;

    while index < 5 {
        println!("the value is: {}", a[index]);

        index += 1;
    }
}
```

æ¸…å–® 3-4ï¼šä½¿ç”¨ `while` è¿´åœˆéæ­·é›†åˆä¸­çš„æ¯å€‹å…ƒç´ 

åœ¨é€™è£¡ï¼Œç¨‹å¼ç¢¼é€éé™£åˆ—ä¸­çš„å…ƒç´ é€²è¡Œè¨ˆæ•¸ã€‚å®ƒå¾ç´¢å¼• `0` é–‹å§‹ï¼Œç„¶å¾Œè¿´åœˆç›´åˆ°åˆ°é”é™£åˆ—ä¸­çš„æœ€çµ‚ç´¢å¼•ï¼ˆå³ç•¶ `index < 5` ä¸å†ç‚º `true` æ™‚ï¼‰ã€‚åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼å°‡å°å‡ºé™£åˆ—ä¸­çš„æ¯å€‹å…ƒç´ ï¼š

```
$ cargo run
   Compiling loops v0.1.0 (file:///projects/loops)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.32s
     Running `target/debug/loops`
the value is: 10
the value is: 20
the value is: 30
the value is: 40
the value is: 50
```

æ‰€æœ‰äº”å€‹é™£åˆ—å€¼éƒ½æŒ‰é æœŸå‡ºç¾åœ¨çµ‚ç«¯æ©Ÿä¸­ã€‚å„˜ç®¡ `index` åœ¨æŸå€‹æ™‚å€™æœƒé”åˆ° `5` çš„å€¼ï¼Œä½†åœ¨å˜—è©¦å¾é™£åˆ—ä¸­ç²å–ç¬¬å…­å€‹å€¼ä¹‹å‰ï¼Œè¿´åœˆå°±åœæ­¢åŸ·è¡Œäº†ã€‚

ç„¶è€Œï¼Œé€™ç¨®æ–¹æ³•å®¹æ˜“å‡ºéŒ¯ï¼›å¦‚æœç´¢å¼•å€¼æˆ–æ¸¬è©¦æ¢ä»¶ä¸æ­£ç¢ºï¼Œæˆ‘å€‘å¯èƒ½æœƒå°è‡´ç¨‹å¼ panicã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å°‡é™£åˆ— `a` çš„å®šç¾©æ›´æ”¹ç‚ºå››å€‹å…ƒç´ ï¼Œä½†å¿˜è¨˜å°‡æ¢ä»¶æ›´æ–°ç‚º `while index < 4`ï¼Œç¨‹å¼ç¢¼å°‡æœƒ panicã€‚å®ƒä¹Ÿå¾ˆæ…¢ï¼Œå› ç‚ºç·¨è­¯å™¨æœƒåœ¨è¿´åœˆçš„æ¯æ¬¡è¿­ä»£ä¸­æ·»åŠ åŸ·è¡Œæ™‚ç¨‹å¼ç¢¼ä¾†åŸ·è¡Œç´¢å¼•æ˜¯å¦åœ¨é™£åˆ—ç¯„åœå…§çš„æ¢ä»¶æª¢æŸ¥ã€‚

ä½œç‚ºä¸€ç¨®æ›´ç°¡æ½”çš„æ›¿ä»£æ–¹æ¡ˆï¼Œä½ å¯ä»¥ä½¿ç”¨ `for` è¿´åœˆä¸¦ç‚ºé›†åˆä¸­çš„æ¯å€‹é …ç›®åŸ·è¡Œä¸€äº›ç¨‹å¼ç¢¼ã€‚`for` è¿´åœˆçœ‹èµ·ä¾†åƒæ¸…å–® 3-5 ä¸­çš„ç¨‹å¼ç¢¼ã€‚

src/main.rs

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a {
        println!("the value is: {element}");
    }
}
```

æ¸…å–® 3-5ï¼šä½¿ç”¨ `for` è¿´åœˆéæ­·é›†åˆä¸­çš„æ¯å€‹å…ƒç´ 

ç•¶æˆ‘å€‘åŸ·è¡Œé€™æ®µç¨‹å¼ç¢¼æ™‚ï¼Œæˆ‘å€‘å°‡çœ‹åˆ°èˆ‡æ¸…å–® 3-4 ç›¸åŒçš„è¼¸å‡ºã€‚æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘å€‘ç¾åœ¨æé«˜äº†ç¨‹å¼ç¢¼çš„å®‰å…¨æ€§ï¼Œä¸¦æ¶ˆé™¤äº†å¯èƒ½å› è¶…å‡ºé™£åˆ—æœ«ç«¯æˆ–æœªèƒ½è¶³å¤ éæ­·è€Œéºæ¼æŸäº›é …ç›®æ‰€å°è‡´çš„éŒ¯èª¤æ©Ÿæœƒã€‚å¾ `for` è¿´åœˆç”¢ç”Ÿçš„æ©Ÿå™¨ç¢¼ä¹Ÿå¯èƒ½æ›´æœ‰æ•ˆç‡ï¼Œå› ç‚ºåœ¨æ¯æ¬¡è¿­ä»£æ™‚ä¸éœ€è¦å°‡ç´¢å¼•èˆ‡é™£åˆ—é•·åº¦é€²è¡Œæ¯”è¼ƒã€‚

ä½¿ç”¨ `for` è¿´åœˆï¼Œå¦‚æœä½ æ›´æ”¹é™£åˆ—ä¸­çš„å€¼æ•¸é‡ï¼Œå‰‡ç„¡éœ€è¨˜ä½æ›´æ”¹ä»»ä½•å…¶ä»–ç¨‹å¼ç¢¼ï¼Œå°±åƒä½ åœ¨æ¸…å–® 3-4 ä¸­ä½¿ç”¨çš„æ–¹æ³•é‚£æ¨£ã€‚

`for` è¿´åœˆçš„å®‰å…¨æ€§å’Œç°¡æ½”æ€§ä½¿å…¶æˆç‚º Rust ä¸­æœ€å¸¸ç”¨çš„è¿´åœˆçµæ§‹ã€‚å³ä½¿åœ¨ä½ æƒ³è¦åŸ·è¡ŒæŸäº›ç¨‹å¼ç¢¼ç‰¹å®šæ¬¡æ•¸çš„æƒ…æ³ä¸‹ï¼Œä¾‹å¦‚åœ¨æ¸…å–® 3-3 ä¸­ä½¿ç”¨ `while` è¿´åœˆçš„å€’æ•¸ç¯„ä¾‹ï¼Œå¤§å¤šæ•¸ Rustaceans ä¹Ÿæœƒä½¿ç”¨ `for` è¿´åœˆã€‚é€™æ¨£åšçš„æ–¹æ³•æ˜¯ä½¿ç”¨æ¨™æº–å‡½å¼åº«æä¾›çš„ `Range`ï¼Œå®ƒæœƒç”¢ç”Ÿå¾ä¸€å€‹æ•¸å­—é–‹å§‹åˆ°å¦ä¸€å€‹æ•¸å­—ä¹‹å‰çš„æ‰€æœ‰é€£çºŒæ•¸å­—ã€‚

ä»¥ä¸‹æ˜¯ä½¿ç”¨ `for` è¿´åœˆå’Œæˆ‘å€‘å°šæœªè¨è«–çš„å¦ä¸€å€‹æ–¹æ³• `rev` ä¾†åè½‰ç¯„åœçš„å€’æ•¸ç¯„ä¾‹ï¼š

æª”æ¡ˆåç¨±ï¼šsrc/main.rs

```rust
fn main() {
    for number in (1..4).rev() {
        println!("{number}!");
    }
    println!("LIFTOFF!!!");
}
```

é€™æ®µç¨‹å¼ç¢¼æ˜¯ä¸æ˜¯æ›´å¥½ä¸€äº›ï¼Ÿ

## ç¸½çµ (Summary)

ä½ æˆåŠŸäº†ï¼é€™æ˜¯ä¸€å€‹å…§å®¹è±å¯Œçš„ç« ç¯€ï¼šä½ å­¸ç¿’äº†è®Šæ•¸ã€ç´”é‡å’Œè¤‡åˆè³‡æ–™å‹åˆ¥ã€å‡½æ•¸ã€è¨»è§£ã€`if` è¡¨é”å¼å’Œè¿´åœˆï¼ç‚ºäº†ç·´ç¿’æœ¬ç« è¨è«–çš„æ¦‚å¿µï¼Œè«‹å˜—è©¦å»ºç«‹ç¨‹å¼ä¾†åŸ·è¡Œä»¥ä¸‹ä»»å‹™ï¼š

*   åœ¨è¯æ°å’Œæ”æ°ä¹‹é–“è½‰æ›æº«åº¦ã€‚
*   ç”¢ç”Ÿç¬¬ *n* å€‹è²»æ³¢é‚£å¥‘æ•¸åˆ—ã€‚
*   å°å‡ºè–èª•é Œæ­Œã€ŒåäºŒè–èª•æ—¥ã€çš„æ­Œè©ï¼Œåˆ©ç”¨æ­Œæ›²ä¸­çš„é‡è¤‡éƒ¨åˆ†ã€‚

ç•¶ä½ æº–å‚™å¥½ç¹¼çºŒæ™‚ï¼Œæˆ‘å€‘å°‡è¨è«– Rust ä¸­ä¸€å€‹ä¸å¸¸è¦‹æ–¼å…¶ä»–ç¨‹å¼èªè¨€çš„æ¦‚å¿µï¼šæ‰€æœ‰æ¬Š (ownership)ã€‚